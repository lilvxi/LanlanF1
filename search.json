[
  {
    "objectID": "step4_shiny.html",
    "href": "step4_shiny.html",
    "title": "Formula 1 Fatal Events: Interactive Explorer",
    "section": "",
    "text": "This interactive Shiny application https://qingll.shinyapps.io/F1FatalExplorer/ allows you to explore Formula 1 fatal events data from 1950 to 2024. You can filter by year, constructor, driver, and fatal status to examine patterns in the data.\nFeatures:\n\nCircuit Map: Visualize F1 circuits around the world with fatal event indicators\nAnalytics Dashboard: Explore annual trends, constructor distributions, and nationality patterns\nData Table: Browse and download filtered race results data\n\n\n\n\n\n\n\n\n\n\n\nTipTips for Using the Explorer\n\n\n\n\nUse the sidebar filters to narrow down the data\nClick on map markers to see detailed circuit information\nIn the Data Table, fatal events are highlighted in red and appear first\nUse the Download button to export filtered data"
  },
  {
    "objectID": "step4_shiny.html#interactive-data-explorer",
    "href": "step4_shiny.html#interactive-data-explorer",
    "title": "Formula 1 Fatal Events: Interactive Explorer",
    "section": "",
    "text": "This interactive Shiny application https://qingll.shinyapps.io/F1FatalExplorer/ allows you to explore Formula 1 fatal events data from 1950 to 2024. You can filter by year, constructor, driver, and fatal status to examine patterns in the data.\nFeatures:\n\nCircuit Map: Visualize F1 circuits around the world with fatal event indicators\nAnalytics Dashboard: Explore annual trends, constructor distributions, and nationality patterns\nData Table: Browse and download filtered race results data\n\n\n\n\n\n\n\n\n\n\n\nTipTips for Using the Explorer\n\n\n\n\nUse the sidebar filters to narrow down the data\nClick on map markers to see detailed circuit information\nIn the Data Table, fatal events are highlighted in red and appear first\nUse the Download button to export filtered data"
  },
  {
    "objectID": "step2_EDAViz.html",
    "href": "step2_EDAViz.html",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "",
    "text": "This document presents a comprehensive visual exploration of fatal events in Formula 1 racing from 1950 to 2024. Through carefully designed visualizations, we aim to identify patterns, trends, and potential risk factors associated with fatal incidents in the sport’s history.\nKey questions we explore through visualization:\n\nHow has the risk of fatal events changed over time?\nAre certain drivers, nationalities, or teams associated with higher fatality rates?\nWhich circuits or regions present higher safety risks?\nWhat driver factors (age, experience) correlate with fatal incidents?\nHow have safety improvements affected fatality rates over time?"
  },
  {
    "objectID": "step2_EDAViz.html#introduction",
    "href": "step2_EDAViz.html#introduction",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "",
    "text": "This document presents a comprehensive visual exploration of fatal events in Formula 1 racing from 1950 to 2024. Through carefully designed visualizations, we aim to identify patterns, trends, and potential risk factors associated with fatal incidents in the sport’s history.\nKey questions we explore through visualization:\n\nHow has the risk of fatal events changed over time?\nAre certain drivers, nationalities, or teams associated with higher fatality rates?\nWhich circuits or regions present higher safety risks?\nWhat driver factors (age, experience) correlate with fatal incidents?\nHow have safety improvements affected fatality rates over time?"
  },
  {
    "objectID": "step2_EDAViz.html#temporal-trends-in-fatal-events",
    "href": "step2_EDAViz.html#temporal-trends-in-fatal-events",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "2. Temporal Trends in Fatal Events",
    "text": "2. Temporal Trends in Fatal Events\n\n2.1 Annual Driver Participation and Fatal Events\nOur first visualization examines the relationship between the number of drivers participating each year and the occurrence of fatal events.\n\n\nCode\n# Prepare annual driver and fatality data\nannual_driver_data &lt;- dataOK %&gt;%\n  group_by(year) %&gt;%\n  summarize(\n    NumberDrivers = n_distinct(driver.name),\n    NumberFatalEvent = sum(driver.fatal == 'Death', na.rm = TRUE)\n  ) %&gt;%\n  mutate(year = factor(year))\n\n# Create the visualization\nannual_driver_plot &lt;- ggplot(annual_driver_data, aes(x = year)) +\n  # Bar chart - Number of drivers\n  geom_bar(aes(y = NumberDrivers, fill = \"Number of Drivers\"), stat = 'identity', alpha = 0.8) +\n  # Points - Fatal events\n  geom_point(aes(y = NumberFatalEvent * 5, color = \"Fatal Events\"), \n             data = filter(annual_driver_data, NumberFatalEvent &gt; 0), size = 3) +\n  # Add labels for fatal events\n  geom_text(aes(y = NumberFatalEvent * 5 + 5, label = NumberFatalEvent),\n            data = filter(annual_driver_data, NumberFatalEvent &gt; 0), \n            color = \"darkred\", size = 3, vjust = 0) +\n  # Add labels\n  labs(title = \"Annual Statistics of Drivers and Fatal Events\",\n       subtitle = \"1950-2024 Formula 1 Championship\",\n       x = \"Year\",\n       y = \"Number of Drivers\") +\n  # Set secondary y-axis for fatal events\n  scale_y_continuous(sec.axis = sec_axis(~./5, name = \"Number of Fatal Events\")) +\n  # Set colors\n  scale_fill_manual(values = c(\"Number of Drivers\" = \"#3a86ff\")) +\n  scale_color_manual(values = c(\"Fatal Events\" = \"#e63946\")) +\n  # Optimize theme\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\", margin = margin(b = 15)),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    axis.title.x = element_text(size = 12, margin = margin(t = 10)),\n    axis.title.y = element_text(size = 12, margin = margin(r = 10), color = \"#3a86ff\"),\n    axis.title.y.right = element_text(size = 12, margin = margin(l = 10), color = \"#e63946\"),\n    axis.text = element_text(size = 10),\n    axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),\n    legend.position = \"bottom\",\n    legend.title = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.border = element_rect(color = \"black\", fill = NA, linewidth = 0.5),\n    plot.margin = margin(20, 20, 20, 20)\n  )\n\n# Display the plot\nannual_driver_plot\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nFatal events were more common in the early decades of Formula 1 (1950s-1970s), while becoming increasingly rare since the 1980s.\nThe number of participating drivers has generally increased over time, indicating the sport’s growth despite safety challenges.\nSeveral years in the modern era have seen zero fatal events, suggesting effective safety improvements.\n\n\n\n2.2 Annual Races and Fatal Event Occurrence\nThis visualization examines the relationship between the number of races held each year and whether any fatal events occurred during that year.\n\n\nCode\n# Prepare annual race and fatality data\nannual_race_data &lt;- dataOK %&gt;%\n  group_by(year) %&gt;%\n  summarize(\n    NumberRaces = n_distinct(Race),\n    FatalEventOccur = any(driver.fatal == 'Death', na.rm = TRUE)\n  ) %&gt;%\n  mutate(year = factor(year))\n\n# Create the visualization\nannual_race_plot &lt;- ggplot(annual_race_data, aes(x = year, y = NumberRaces)) +\n  # Add line connecting all points\n  geom_line(color = \"#666666\", linewidth = 0.8, group = 'a') +\n  # Add points with different shapes/colors based on fatal events\n  geom_point(aes(shape = FatalEventOccur, color = FatalEventOccur), size = 3) +\n  # Add labels\n  labs(title = \"Annual Number of Races and Fatal Event Occurrence\",\n       subtitle = \"1950-2024 Formula 1 Championship\",\n       x = \"Year\",\n       y = \"Number of Races\",\n       color = \"Fatal Event Occurred\",\n       shape = \"Fatal Event Occurred\") +\n  # Set custom colors for points\n  scale_color_manual(values = c(\"FALSE\" = \"#3a86ff\", \"TRUE\" = \"#e63946\"),\n                     labels = c(\"FALSE\" = \"No\", \"TRUE\" = \"Yes\")) +\n  # Set custom shapes for points\n  scale_shape_manual(values = c(\"FALSE\" = 16, \"TRUE\" = 18),\n                     labels = c(\"FALSE\" = \"No\", \"TRUE\" = \"Yes\")) +\n  # Enhanced theme\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\", margin = margin(b = 15)),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    axis.title.x = element_text(size = 12, margin = margin(t = 10)),\n    axis.title.y = element_text(size = 12, margin = margin(r = 10)),\n    axis.text = element_text(size = 10),\n    axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),\n    legend.position = \"bottom\",\n    legend.box = \"horizontal\",\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.border = element_rect(color = \"black\", fill = NA, linewidth = 0.5),\n    plot.margin = margin(20, 20, 20, 20)\n  ) +\n  # Add gridlines for better readability\n  geom_hline(yintercept = seq(min(annual_race_data$NumberRaces), max(annual_race_data$NumberRaces), by = 2), \n             linetype = \"dotted\", color = \"#bbbbbb\", linewidth = 0.3)\n\n# Display the plot\nannual_race_plot\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nThe number of races per season has increased significantly over time, especially since the 2000s.\nThere appears to be an inverse relationship between calendar expansion (more races) and fatal event occurrence.\nRecent decades have seen consistently improved safety despite the increased number of race events."
  },
  {
    "objectID": "step2_EDAViz.html#constructorteam-analysis",
    "href": "step2_EDAViz.html#constructorteam-analysis",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "3. Constructor/Team Analysis",
    "text": "3. Constructor/Team Analysis\n\n3.1 Distribution of Fatal Events by Constructor\nThis pie chart visualizes how fatal events have been distributed across different constructors (teams).\n\n\nCode\n# Prepare constructor fatality data\nconstructor_fatal_data &lt;- dataOK %&gt;%\n  filter(driver.fatal == 'Death') %&gt;%\n  group_by(constructor.name) %&gt;%\n  summarize(NumberFatalDrivers = n()) %&gt;%\n  arrange(desc(NumberFatalDrivers))\n\n# Create interactive pie chart\nconstructor_pie_chart &lt;- plot_ly(data = constructor_fatal_data, \n        labels = ~constructor.name, \n        values = ~NumberFatalDrivers, \n        type = 'pie',\n        textinfo = 'label+percent',\n        hoverinfo = 'text',\n        text = ~paste(constructor.name, \": \", NumberFatalDrivers, \" fatal drivers\"),\n        marker = list(\n          colors = colorRampPalette(c(\"#3a86ff\", \"#e63946\"))(nrow(constructor_fatal_data)),\n          line = list(color = '#FFFFFF', width = 1)\n        )) %&gt;%\n  layout(\n    title = list(\n      text = \"Distribution of Fatal Drivers by Constructor\",\n      font = list(size = 16, family = \"Arial\", color = \"#333333\")\n    ),\n    showlegend = FALSE,\n    margin = list(l = 20, r = 20, t = 50, b = 20),\n    paper_bgcolor = '#FAFAFA'\n  ) %&gt;%\n  config(displayModeBar = FALSE)\n\n# Display the plot\nconstructor_pie_chart\n\n\n\n\n\n\nKey Insights:\n\nFatal events are not evenly distributed across constructors, with several historic teams accounting for a disproportionate number of incidents.\nFerrari, with the longest history in F1, has unfortunately experienced the most fatal events.\nMany modern teams have zero fatal incidents, highlighting safety improvements across the sport."
  },
  {
    "objectID": "step2_EDAViz.html#driver-nationality-analysis",
    "href": "step2_EDAViz.html#driver-nationality-analysis",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "4. Driver Nationality Analysis",
    "text": "4. Driver Nationality Analysis\n\n4.1 Driver Nationalities and Fatality Rates\nThis visualization uses an interactive sunburst chart to show the hierarchical relationship between driver nationalities, grouped by continents, and their associated fatality rates.\n\n\nCode\n# Prepare nationality data\nnationality_data &lt;- dataOK %&gt;%\n  group_by(driver.nationality) %&gt;%\n  summarize(\n    NumberDrivers = n_distinct(driver.name),\n    NumberFatalEvent = sum(driver.fatal == 'Death', na.rm = TRUE)\n  )\n\n# Add continent grouping and calculate fatality rate\nnationality_data &lt;- nationality_data %&gt;%\n  mutate(\n    continent = case_when(\n      driver.nationality %in% c(\"Italian\", \"British\", \"French\", \"Belgian\", \"Swiss\", \"Monegasque\", \n                              \"German\", \"Spanish\", \"Dutch\", \"Swedish\", \"Portuguese\", \n                              \"Austrian\", \"Liechtensteiner\", \"Danish\", \"Finnish\", \n                              \"Czech\", \"Hungarian\", \"Polish\", \"Russian\") ~ \"Europe\",\n      driver.nationality %in% c(\"Argentine\", \"Brazilian\", \"Uruguayan\", \"Venezuelan\", \n                              \"Mexican\", \"Canadian\", \"Chilean\", \"Colombian\", \"Argentinian\") ~ \"Americas\",\n      driver.nationality %in% c(\"Thai\", \"Japanese\", \"Malaysian\", \"Indian\", \"Indonesian\", \n                              \"Chinese\") ~ \"Asia\",\n      driver.nationality %in% c(\"South African\", \"Rhodesian\") ~ \"Africa\",\n      driver.nationality %in% c(\"Australian\", \"New Zealander\") ~ \"Oceania\",\n      driver.nationality == \"American\" ~ \"North America\",\n      driver.nationality %in% c(\"American-Italian\", \"Argentine-Italian\") ~ \"Mixed\",\n      TRUE ~ \"Other\"\n    ),\n    fatality_rate = ifelse(NumberDrivers &gt; 0, NumberFatalEvent / NumberDrivers * 100, 0),\n    label_text = paste0(driver.nationality, \n                      \"&lt;br&gt;Drivers: \", NumberDrivers, \n                      \"&lt;br&gt;Fatal events: \", NumberFatalEvent,\n                      \"&lt;br&gt;Fatality rate: \", round(fatality_rate, 1), \"%\")\n  )\n\n# Create continent summaries for the inner ring\ncontinent_data &lt;- nationality_data %&gt;%\n  group_by(continent) %&gt;%\n  summarize(\n    NumberDrivers = sum(NumberDrivers),\n    NumberFatalEvent = sum(NumberFatalEvent),\n    fatality_rate = sum(NumberFatalEvent) / sum(NumberDrivers) * 100,\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(\n    label_text = paste0(continent, \n                      \"&lt;br&gt;Total drivers: \", NumberDrivers, \n                      \"&lt;br&gt;Total fatal events: \", NumberFatalEvent,\n                      \"&lt;br&gt;Fatality rate: \", round(fatality_rate, 1), \"%\")\n  )\n\n# Prepare data for the sunburst chart\nlabels &lt;- c(continent_data$continent, nationality_data$driver.nationality)\nparents &lt;- c(rep(\"\", nrow(continent_data)), nationality_data$continent)\nvalues &lt;- c(continent_data$NumberDrivers, nationality_data$NumberDrivers)\nhover_text &lt;- c(continent_data$label_text, nationality_data$label_text)\n\n# Create color scale based on fatality rate\nfatality_rates &lt;- c(continent_data$fatality_rate, nationality_data$fatality_rate)\ncolors &lt;- sapply(fatality_rates, function(rate) {\n  if (rate == 0) return(\"#3a86ff\")          # Blue for zero fatality\n  else if (rate &lt;= 3) return(\"#8ecae6\")      # Light blue for low fatality\n  else if (rate &lt;= 6) return(\"#ffb703\")      # Yellow for medium fatality\n  else return(\"#e63946\")                     # Red for high fatality\n})\n\n# Create the sunburst chart\nnationality_sunburst &lt;- plot_ly(\n  labels = labels,\n  parents = parents,\n  values = values,\n  type = \"sunburst\",\n  branchvalues = \"total\",\n  hovertext = hover_text,\n  hoverinfo = \"text\",\n  marker = list(\n    colors = colors,\n    line = list(color = \"#ffffff\", width = 1)\n  ),\n  textinfo = \"label\",\n  insidetextorientation = \"radial\"\n) %&gt;% layout(\n  title = list(\n    text = \"F1 Drivers by Nationality and Fatality Rate\",\n    font = list(size = 16, family = \"Arial\", color = \"#333333\")\n  ),\n  margin = list(l = 20, r = 20, t = 50, b = 20)\n)\n\n# Display the plot\nnationality_sunburst\n\n\n\n\n\n\nKey Insights:\n\nEuropean nations, particularly British and Italian drivers, have had the largest representation in F1 with varying fatality rates.\nContinental differences exist, with some regions showing consistently lower risk profiles than others.\nNations with fewer total drivers often show more extreme fatality rates due to small sample sizes.\n\n\n\n4.2 Nationality Data Table\nThis table provides detailed statistics on driver nationalities and their associated fatality events.\n\n\nCode\n# Prepare nationality table data\nnationality_table_data &lt;- nationality_data %&gt;%\n  select(driver.nationality, NumberDrivers, NumberFatalEvent) %&gt;%\n  # Add fatality rate indicator\n  mutate(\n    FatalityRate = ifelse(NumberDrivers &gt; 0, \n                          round(NumberFatalEvent/NumberDrivers*100, 2), 0)\n  ) %&gt;%\n  # Sort by number of drivers in descending order\n  arrange(desc(NumberDrivers))\n\n# Create table\nnationality_table &lt;- nationality_table_data %&gt;%\n  gt() %&gt;%\n  # Set column labels\n  cols_label(\n    driver.nationality = \"Nationality\",\n    NumberDrivers = \"Number of Drivers\",\n    NumberFatalEvent = \"Fatal Events\",\n    FatalityRate = \"Fatality Rate (%)\"\n  ) %&gt;%\n  # Set table title and subtitle\n  tab_header(\n    title = md(\"**Formula 1 Driver Nationalities and Fatalities**\"),\n    subtitle = \"Historical data on drivers and fatal events by nationality\"\n  ) %&gt;%\n  # Format number columns\n  fmt_number(\n    columns = NumberDrivers,\n    use_seps = TRUE,\n    decimals = 0\n  ) %&gt;%\n  fmt_number(\n    columns = NumberFatalEvent,\n    use_seps = TRUE,\n    decimals = 0\n  ) %&gt;%\n  fmt_percent(\n    columns = FatalityRate,\n    decimals = 2,\n    scale_values = FALSE\n  ) %&gt;%\n  # Conditional formatting - highlight fatality rates\n  data_color(\n    columns = FatalityRate,\n    colors = scales::col_numeric(\n      palette = c(\"#3a86ff\", \"#8ecae6\", \"#ffb703\", \"#e63946\"),\n      domain = c(0, 20)\n    )\n  ) %&gt;%\n  # Set table style\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_column_labels()\n  ) %&gt;%\n  # Footnote\n  tab_source_note(\n    source_note = md(\"*Fatality Rate = (Fatal Events / Number of Drivers) × 100*\")\n  ) %&gt;%\n  # Set table theme\n  tab_options(\n    heading.background.color = \"#f0f0f0\",\n    column_labels.background.color = \"#e0e0e0\",\n    table.border.top.style = \"hidden\",\n    table.border.bottom.style = \"hidden\",\n    column_labels.border.top.style = \"solid\",\n    column_labels.border.top.width = px(2),\n    column_labels.border.top.color = \"#404040\",\n    table_body.hlines.color = \"#f0f0f0\",\n    table_body.border.bottom.color = \"#404040\",\n    footnotes.border.bottom.color = \"#404040\",\n    source_notes.border.bottom.color = \"#404040\",\n    footnotes.padding = px(5),\n    source_notes.padding = px(5)\n  )\n\n# Display the table\nnationality_table\n\n\n\n\n\n\n\n\nFormula 1 Driver Nationalities and Fatalities\n\n\nHistorical data on drivers and fatal events by nationality\n\n\nNationality\nNumber of Drivers\nFatal Events\nFatality Rate (%)\n\n\n\n\nBritish\n166\n8\n4.82%\n\n\nAmerican\n158\n3\n1.90%\n\n\nItalian\n99\n3\n3.03%\n\n\nFrench\n73\n3\n4.11%\n\n\nGerman\n50\n1\n2.00%\n\n\nBrazilian\n32\n1\n3.12%\n\n\nArgentine\n24\n1\n4.17%\n\n\nBelgian\n23\n0\n0.00%\n\n\nSouth African\n23\n0\n0.00%\n\n\nSwiss\n23\n0\n0.00%\n\n\nJapanese\n20\n0\n0.00%\n\n\nAustralian\n19\n0\n0.00%\n\n\nDutch\n18\n0\n0.00%\n\n\nAustrian\n15\n3\n20.00%\n\n\nSpanish\n15\n0\n0.00%\n\n\nCanadian\n14\n1\n7.14%\n\n\nNew Zealander\n10\n0\n0.00%\n\n\nSwedish\n10\n1\n10.00%\n\n\nFinnish\n9\n0\n0.00%\n\n\nMexican\n6\n0\n0.00%\n\n\nDanish\n5\n0\n0.00%\n\n\nIrish\n5\n0\n0.00%\n\n\nMonegasque\n4\n0\n0.00%\n\n\nPortuguese\n4\n0\n0.00%\n\n\nRhodesian\n4\n0\n0.00%\n\n\nRussian\n4\n0\n0.00%\n\n\nUruguayan\n4\n0\n0.00%\n\n\nColombian\n3\n0\n0.00%\n\n\nEast German\n3\n0\n0.00%\n\n\nVenezuelan\n3\n0\n0.00%\n\n\nIndian\n2\n0\n0.00%\n\n\nThai\n2\n0\n0.00%\n\n\nAmerican-Italian\n1\n0\n0.00%\n\n\nArgentine-Italian\n1\n0\n0.00%\n\n\nArgentinian\n1\n0\n0.00%\n\n\nChilean\n1\n0\n0.00%\n\n\nChinese\n1\n0\n0.00%\n\n\nCzech\n1\n0\n0.00%\n\n\nHungarian\n1\n0\n0.00%\n\n\nIndonesian\n1\n0\n0.00%\n\n\nLiechtensteiner\n1\n0\n0.00%\n\n\nMalaysian\n1\n0\n0.00%\n\n\nPolish\n1\n0\n0.00%\n\n\n\nFatality Rate = (Fatal Events / Number of Drivers) × 100\n\n\n\n\n\n\n\n\nKey Insights:\n\nBritish drivers form the largest national group in F1 history, followed by Italian and American drivers.\nSeveral nationalities have never experienced a fatal incident, while others have disproportionately high fatality rates.\nThe color-coding highlights risk patterns across different driver nationalities, making it easy to identify high-risk groups."
  },
  {
    "objectID": "step2_EDAViz.html#circuit-analysis",
    "href": "step2_EDAViz.html#circuit-analysis",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "5. Circuit Analysis",
    "text": "5. Circuit Analysis\n\n5.1 Global Map of Formula 1 Circuits and Fatal Events\nThis map visualization shows the geographic distribution of Formula 1 circuits around the world, highlighting their safety records.\n\n\n\nCode\n# Prepare circuit data\ncircuit_data &lt;- dataOK %&gt;%\n  group_by(circuit.name, lng, lat) %&gt;%\n  summarize(\n    NumberofRace = n_distinct(Race),\n    NumberFatalEvent = sum(driver.fatal == 'Death', na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n# Prepare data for visualization\ncircuit_data &lt;- circuit_data %&gt;%\n  mutate(\n    # Calculate fatality ratio\n    FatalityRatio = ifelse(NumberofRace &gt; 0, NumberFatalEvent/NumberofRace, 0),\n    # Categorize circuits for labeling\n    ImportanceScore = (NumberofRace/10) + (NumberFatalEvent*5),\n    # Determine which circuits to label\n    LabelCircuit = ImportanceScore &gt; 5 | NumberFatalEvent &gt; 1\n  )\n\n# Get world map data\nworld_map &lt;- map_data(\"world\")\n\n# Create the visualization\nworld_circuit_map &lt;- ggplot() +\n  # Add world map background\n  geom_polygon(data = world_map, \n               aes(x = long, y = lat, group = group),\n               fill = \"#f8f8f8\", color = \"#e0e0e0\", size = 0.1) +\n  # Add circuit points\n  geom_point(data = circuit_data,\n             aes(x = lng, y = lat, \n                 size = NumberofRace,\n                 fill = factor(NumberFatalEvent),\n                 alpha = 0.9),\n             shape = 21, color = \"black\", stroke = 0.3) +\n  # Add labels for important circuits\n  geom_text_repel(data = filter(circuit_data, LabelCircuit),\n                aes(x = lng, y = lat, label = circuit.name),\n                size = 3, \n                box.padding = 0.5, \n                point.padding = 0.5,\n                min.segment.length = 0,\n                max.overlaps = 15,\n                segment.color = \"gray50\",\n                force = 3) +\n  # Custom fill scale for fatal events\n  scale_fill_manual(\n    name = \"Fatal Events\",\n    values = c(\"0\" = \"#3a86ff\", \"1\" = \"#ffb703\", \"2\" = \"#fb8500\", \"3\" = \"#e63946\"),\n    labels = c(\"None\", \"One\", \"Two\", \"Three\")\n  ) +\n  # Custom size scale\n  scale_size_continuous(\n    name = \"Number of Races\",\n    range = c(1.5, 10),\n    breaks = c(1, 10, 25, 50, 75)\n  ) +\n  # Hide alpha from legend\n  guides(alpha = \"none\") +\n  # Add titles and captions\n  labs(\n    title = \"Formula 1 Circuits Around the World\",\n    subtitle = \"Size indicates number of races; color indicates fatal events\",\n    caption = \"Data source: Formula 1 historical records (1950-2024)\"\n  ) +\n  # Adjust theme\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 12, hjust = 0.5, margin = margin(b = 20)),\n    panel.grid.major = element_line(color = \"#e5e5e5\", size = 0.2),\n    panel.grid.minor = element_blank(),\n    axis.title = element_blank(),\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    legend.position = \"bottom\",\n    legend.box = \"vertical\",\n    plot.margin = margin(10, 10, 10, 10)\n  ) +\n  # Set appropriate map projection\n  coord_fixed(ratio = 1.3, xlim = c(-150, 150), ylim = c(-60, 80))\n\n# Display the map\nworld_circuit_map\n\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nFormula 1 circuits are concentrated in Europe, with historic European circuits (Monza, Spa-Francorchamps, Nürburgring) having higher numbers of fatal events.\nNewer circuits, particularly in Asia and the Middle East, have excellent safety records.\nThe size of points reveals which circuits have hosted the most races over time.\n\n\n5.2 Circuit Safety Records Table\nThis table provides detailed safety statistics for Formula 1 circuits.\n\n\nCode\n# Prepare data for the table\ncircuit_table_data &lt;- circuit_data %&gt;%\n  # Calculate fatality ratio\n  mutate(\n    FatalityRatio = ifelse(NumberofRace &gt; 0, \n                          round(NumberFatalEvent/NumberofRace*100, 2), 0),\n    # Extract approximate location from coordinates\n    Location = paste0(\"(\", round(lat, 1), \"°, \", round(lng, 1), \"°)\")\n  ) %&gt;%\n  # Select and rename relevant columns\n  select(\n    Circuit = circuit.name,\n    Location,\n    Races = NumberofRace, \n    `Fatal Events` = NumberFatalEvent,\n    `Fatality Rate (%)` = FatalityRatio\n  ) %&gt;%\n  # Sort by number of races in descending order\n  arrange(desc(Races))\n\n# Create the table\ncircuit_safety_table &lt;- circuit_table_data %&gt;%\n  gt() %&gt;%\n  # Set table title and subtitle\n  tab_header(\n    title = md(\"**Formula 1 Circuits and Safety Records**\"),\n    subtitle = \"Historical data on races and fatal events by circuit\"\n  ) %&gt;%\n  # Format number columns\n  fmt_number(\n    columns = Races,\n    use_seps = TRUE,\n    decimals = 0\n  ) %&gt;%\n  fmt_number(\n    columns = `Fatal Events`,\n    use_seps = TRUE,\n    decimals = 0\n  ) %&gt;%\n  fmt_number(\n    columns = `Fatality Rate (%)`,\n    decimals = 2\n  ) %&gt;%\n  # Highlight cells with fatal events\n  tab_style(\n    style = list(\n      cell_fill(color = \"#ffb7032a\")\n    ),\n    locations = cells_body(\n      columns = `Fatal Events`,\n      rows = `Fatal Events` &gt; 0\n    )\n  ) %&gt;%\n  # Color coding for fatality rate\n  data_color(\n    columns = `Fatality Rate (%)`,\n    colors = scales::col_numeric(\n      palette = c(\"#ffffff\", \"#ffb703\", \"#e63946\"),\n      domain = c(0, 15)\n    )\n  ) %&gt;%\n  # Style header\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_column_labels()\n  ) %&gt;%\n  # Add footnote\n  tab_footnote(\n    footnote = \"Fatality Rate = (Fatal Events / Number of Races) × 100\",\n    locations = cells_column_labels(columns = `Fatality Rate (%)`)\n  ) %&gt;%\n  # Optimize table appearance\n  tab_options(\n    heading.background.color = \"#f0f0f0\",\n    column_labels.background.color = \"#e0e0e0\",\n    table.border.top.style = \"hidden\",\n    table.border.bottom.style = \"hidden\",\n    column_labels.border.top.style = \"solid\",\n    column_labels.border.top.width = px(2),\n    column_labels.border.top.color = \"#404040\",\n    table_body.hlines.color = \"#f0f0f0\",\n    table_body.border.bottom.color = \"#404040\",\n    footnotes.border.bottom.color = \"#404040\",\n    source_notes.border.bottom.color = \"#404040\",\n    footnotes.padding = px(5),\n    source_notes.padding = px(5)\n  )\n\n# Display the table\ncircuit_safety_table\n\n\n\n\n\n\n\n\nFormula 1 Circuits and Safety Records\n\n\nHistorical data on races and fatal events by circuit\n\n\nCircuit\nLocation\nRaces\nFatal Events\nFatality Rate (%)1\n\n\n\n\nAutodromo Nazionale di Monza\n(45.6°, 9.3°)\n74\n3\n4.05\n\n\nCircuit de Monaco\n(43.7°, 7.4°)\n70\n1\n1.43\n\n\nSilverstone Circuit\n(52.1°, -1°)\n59\n0\n0.00\n\n\nCircuit de Spa-Francorchamps\n(50.4°, 6°)\n57\n2\n3.51\n\n\nCircuit Gilles Villeneuve\n(45.5°, -73.5°)\n43\n1\n2.33\n\n\nAutódromo José Carlos Pace\n(-23.7°, -46.7°)\n41\n0\n0.00\n\n\nNürburgring\n(50.3°, 6.9°)\n41\n3\n7.32\n\n\nHungaroring\n(47.6°, 19.2°)\n39\n0\n0.00\n\n\nRed Bull Ring\n(47.2°, 14.8°)\n38\n1\n2.63\n\n\nHockenheimring\n(49.3°, 8.6°)\n37\n0\n0.00\n\n\nCircuit Park Zandvoort\n(52.4°, 4.5°)\n34\n2\n5.88\n\n\nCircuit de Barcelona-Catalunya\n(41.6°, 2.3°)\n34\n0\n0.00\n\n\nSuzuka Circuit\n(34.8°, 136.5°)\n34\n1\n2.94\n\n\nAutodromo Enzo e Dino Ferrari\n(44.3°, 11.7°)\n31\n2\n6.45\n\n\nAlbert Park Grand Prix Circuit\n(-37.8°, 145°)\n27\n0\n0.00\n\n\nAutódromo Hermanos Rodríguez\n(19.4°, -99.1°)\n24\n0\n0.00\n\n\nBahrain International Circuit\n(26°, 50.5°)\n21\n0\n0.00\n\n\nAutódromo Juan y Oscar Gálvez\n(-34.7°, -58.5°)\n20\n0\n0.00\n\n\nKyalami\n(-26°, 28.1°)\n20\n1\n5.00\n\n\nWatkins Glen\n(42.3°, -76.9°)\n20\n2\n10.00\n\n\nIndianapolis Motor Speedway\n(39.8°, -86.2°)\n19\n2\n10.53\n\n\nSepang International Circuit\n(2.8°, 101.7°)\n19\n0\n0.00\n\n\nCircuit Paul Ricard\n(43.3°, 5.8°)\n18\n0\n0.00\n\n\nCircuit de Nevers Magny-Cours\n(46.9°, 3.2°)\n18\n0\n0.00\n\n\nShanghai International Circuit\n(31.3°, 121.2°)\n17\n0\n0.00\n\n\nYas Marina Circuit\n(24.5°, 54.6°)\n16\n0\n0.00\n\n\nMarina Bay Street Circuit\n(1.3°, 103.9°)\n15\n0\n0.00\n\n\nBrands Hatch\n(51.4°, 0.3°)\n14\n0\n0.00\n\n\nAutódromo do Estoril\n(38.8°, -9.4°)\n13\n0\n0.00\n\n\nCircuit of the Americas\n(30.1°, -97.6°)\n12\n0\n0.00\n\n\nAdelaide Street Circuit\n(-34.9°, 138.6°)\n11\n0\n0.00\n\n\nReims-Gueux\n(49.3°, 3.9°)\n11\n1\n9.09\n\n\nAutódromo Internacional Nelson Piquet\n(-23°, -43.4°)\n10\n0\n0.00\n\n\nZolder\n(51°, 5.3°)\n10\n1\n10.00\n\n\nIstanbul Park\n(41°, 29.4°)\n9\n0\n0.00\n\n\nJarama\n(40.6°, -3.6°)\n9\n0\n0.00\n\n\nBaku City Circuit\n(40.4°, 49.9°)\n8\n0\n0.00\n\n\nLong Beach\n(33.8°, -118.2°)\n8\n0\n0.00\n\n\nMosport International Raceway\n(44°, -78.7°)\n8\n0\n0.00\n\n\nSochi Autodrom\n(43.4°, 40°)\n8\n0\n0.00\n\n\nCircuito de Jerez\n(36.7°, -6°)\n7\n0\n0.00\n\n\nDetroit Street Circuit\n(42.3°, -83°)\n7\n0\n0.00\n\n\nDijon-Prenois\n(47.4°, 4.9°)\n6\n0\n0.00\n\n\nScandinavian Raceway\n(57.3°, 13.6°)\n6\n0\n0.00\n\n\nAintree\n(53.5°, -2.9°)\n5\n0\n0.00\n\n\nCircuit Bremgarten\n(47°, 7.4°)\n5\n0\n0.00\n\n\nRouen-Les-Essarts\n(49.3°, 1°)\n5\n1\n20.00\n\n\nValencia Street Circuit\n(39.5°, -0.3°)\n5\n0\n0.00\n\n\nCharade Circuit\n(45.7°, 3°)\n4\n0\n0.00\n\n\nFuji Speedway\n(35.4°, 138.9°)\n4\n0\n0.00\n\n\nJeddah Corniche Circuit\n(21.6°, 39.1°)\n4\n0\n0.00\n\n\nKorean International Circuit\n(34.7°, 126.4°)\n4\n0\n0.00\n\n\nMontjuïc\n(41.4°, 2.2°)\n4\n0\n0.00\n\n\nBuddh International Circuit\n(28.3°, 77.5°)\n3\n0\n0.00\n\n\nLosail International Circuit\n(25.5°, 51.5°)\n3\n0\n0.00\n\n\nMiami International Autodrome\n(26°, -80.2°)\n3\n0\n0.00\n\n\nPhoenix street circuit\n(33.4°, -112.1°)\n3\n0\n0.00\n\n\nPrince George Circuit\n(-33°, 27.9°)\n3\n0\n0.00\n\n\nAutódromo Internacional do Algarve\n(37.2°, -8.6°)\n2\n0\n0.00\n\n\nCircuit Mont-Tremblant\n(46.2°, -74.6°)\n2\n0\n0.00\n\n\nCircuit de Pedralbes\n(41.4°, 2.1°)\n2\n0\n0.00\n\n\nCircuito da Boavista\n(41.2°, -8.7°)\n2\n0\n0.00\n\n\nLas Vegas Street Circuit\n(36.1°, -115.2°)\n2\n0\n0.00\n\n\nLas Vegas Strip Street Circuit\n(36.1°, -115.2°)\n2\n0\n0.00\n\n\nNivelles-Baulers\n(50.6°, 4.3°)\n2\n0\n0.00\n\n\nOkayama International Circuit\n(34.9°, 134.2°)\n2\n0\n0.00\n\n\nAVUS\n(52.5°, 13.3°)\n1\n0\n0.00\n\n\nAin Diab\n(33.6°, -7.7°)\n1\n1\n100.00\n\n\nAutodromo Internazionale del Mugello\n(44°, 11.4°)\n1\n0\n0.00\n\n\nDonington Park\n(52.8°, -1.4°)\n1\n0\n0.00\n\n\nFair Park\n(32.8°, -96.8°)\n1\n0\n0.00\n\n\nLe Mans\n(48°, 0.2°)\n1\n0\n0.00\n\n\nMonsanto Park Circuit\n(38.7°, -9.2°)\n1\n0\n0.00\n\n\nPescara Circuit\n(42.5°, 14.2°)\n1\n0\n0.00\n\n\nRiverside International Raceway\n(33.9°, -117.3°)\n1\n0\n0.00\n\n\nSebring International Raceway\n(27.5°, -81.3°)\n1\n0\n0.00\n\n\nZeltweg\n(47.2°, 14.7°)\n1\n0\n0.00\n\n\n\n1 Fatality Rate = (Fatal Events / Number of Races) × 100\n\n\n\n\n\n\n\n\nKey Insights:\n\nMonza has hosted the most F1 races historically, followed by Monaco, with varying safety records.\nSeveral circuits have hosted numerous races without any fatal incidents, demonstrating consistent safety standards.\nThe color-coding effectively highlights the circuits with concerning safety records at a glance.\n\n\n\n6. Driver Age and Experience Analysis\nThis visualization examines the relationship between driver age and fatal incidents.\n\n\nCode\n# Calculate driver age at each race\ndriver_age_experience &lt;- dataOK %&gt;%\n  mutate(\n    driver_age = as.numeric(difftime(as.Date(date), as.Date(driver.dob), units = \"days\") / 365.25)\n  ) %&gt;%\n  # Flag fatal events\n  group_by(driver.name) %&gt;%\n  mutate(\n    fatal_event = driver.fatal == \"Death\"\n  )\n\n# Create fatal events dataset\nfatal_driver_events &lt;- driver_age_experience %&gt;%\n  filter(fatal_event == TRUE)\n\n# Create overall distribution dataset for comparison\ndriver_age_summary &lt;- driver_age_experience %&gt;%\n  group_by(driver.name) %&gt;%\n  summarize(\n    avg_age = mean(driver_age, na.rm = TRUE),\n    fatal_incident = any(fatal_event),\n    .groups = \"drop\"\n  )\n\n# Create age distribution plot\ndriver_age_distribution &lt;- ggplot() +\n  # Add density plot for all drivers\n  geom_density(data = driver_age_summary, \n               aes(x = avg_age, fill = \"All Drivers\"), alpha = 0.5) +\n  # Add density plot for drivers with fatal incidents\n  geom_density(data = filter(driver_age_summary, fatal_incident == TRUE), \n               aes(x = avg_age, fill = \"Drivers with Fatal Incidents\"), alpha = 0.5) +\n  # Add individual points for fatal events\n  geom_rug(data = fatal_driver_events, aes(x = driver_age), color = \"#e63946\", size = 1.5) +\n  # Styling\n  scale_fill_manual(values = c(\"All Drivers\" = \"#3a86ff\", \"Drivers with Fatal Incidents\" = \"#e63946\")) +\n  labs(\n    title = \"Age Distribution of F1 Drivers and Fatal Incidents\",\n    subtitle = \"Comparing age profiles of all drivers vs. those involved in fatal incidents\",\n    x = \"Driver Age (years)\",\n    y = \"Density\",\n    fill = \"Driver Group\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    legend.position = \"bottom\"\n  )\n\n# Display the plot\ndriver_age_distribution\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nThe age distribution of drivers involved in fatal incidents differs from the overall driver population.\nIndividual fatal events (shown by the red rug marks) reveal specific age patterns that may indicate higher-risk age groups.\nThe density curves show how the risk profile changes across the age spectrum.\n\n\n\n7. Safety Evolution by Decade\nThis visualization shows how Formula 1 safety has improved over time by examining fatality rates by decade.\n\n\nCode\n# Create decade analysis\nsafety_by_decade &lt;- dataOK %&gt;%\n  mutate(\n    decade = paste0(floor(year/10) * 10, \"s\"),  # Create decade categories\n    fatal_event = driver.fatal == \"Death\"\n  ) %&gt;%\n  group_by(decade) %&gt;%\n  summarize(\n    total_races = n_distinct(Race),\n    unique_drivers = n_distinct(driver.name),\n    fatal_events = sum(fatal_event, na.rm = TRUE),\n    fatal_rate_per_race = fatal_events / total_races,\n    fatal_rate_per_100_drivers = fatal_events / unique_drivers * 100,\n    .groups = \"drop\"\n  ) %&gt;%\n  arrange(decade)\n\n# Create decade trend visualization\ndecade_safety_evolution &lt;- ggplot(safety_by_decade) +\n  # Bar chart for total races\n  geom_col(aes(x = decade, y = total_races, fill = \"Total Races\"), alpha = 0.7) +\n  # Line chart for fatality rate\n  geom_line(aes(x = decade, y = fatal_rate_per_100_drivers * 5, group = 1, color = \"Fatality Rate\"), \n            size = 1.5) +\n  geom_point(aes(x = decade, y = fatal_rate_per_100_drivers * 5), \n             color = \"#e63946\", size = 3) +\n  # Add text labels for fatality rate\n  geom_text(aes(x = decade, y = fatal_rate_per_100_drivers * 5 + 2, \n                label = sprintf(\"%.2f\", fatal_rate_per_100_drivers)),\n            color = \"#e63946\", vjust = -0.5) +\n  # Styling\n  scale_fill_manual(values = c(\"Total Races\" = \"#3a86ff\")) +\n  scale_color_manual(values = c(\"Fatality Rate\" = \"#e63946\")) +\n  scale_y_continuous(\n    name = \"Number of Races\",\n    sec.axis = sec_axis(~./5, name = \"Fatal Events per 100 Drivers\")\n  ) +\n  labs(\n    title = \"Formula 1 Safety Evolution by Decade\",\n    subtitle = \"Number of races vs. driver fatality rate\",\n    x = \"Decade\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    axis.title.y = element_text(color = \"#3a86ff\"),\n    axis.title.y.right = element_text(color = \"#e63946\"),\n    legend.position = \"bottom\",\n    legend.title = element_blank()\n  )\n\n# Display the plot\ndecade_safety_evolution\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nThe fatality rate has decreased dramatically from the 1950s to the present day, with the most significant safety improvements occurring between the 1970s and 1980s.\nThere’s a clear inverse relationship between the number of races (blue bars) and fatality rates (red line).\nRecent decades have maintained low fatality rates despite hosting significantly more races.\n\n\n\n8. Circuit Risk Analysis\nThis visualization examines the relationship between race frequency, driver exposure, and fatal events at different circuits.\n\n\nCode\n# Circuit danger analysis\ncircuit_risk_analysis &lt;- dataOK %&gt;%\n  group_by(circuit.name, circuit.country) %&gt;%\n  summarize(\n    races_held = n_distinct(Race),\n    unique_drivers = n_distinct(driver.name),\n    fatal_events = sum(driver.fatal == \"Death\", na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  # Calculate danger metrics\n  mutate(\n    fatality_rate = fatal_events / races_held,\n    danger_index = (fatal_events / unique_drivers) * 100,\n    danger_category = case_when(\n      fatal_events == 0 ~ \"Safe\",\n      danger_index &lt;= 1 ~ \"Low Risk\",\n      danger_index &lt;= 3 ~ \"Medium Risk\",\n      TRUE ~ \"High Risk\"\n    )\n  ) %&gt;%\n  # Filter to circuits with at least 5 races for statistical significance\n  filter(races_held &gt;= 5) %&gt;%\n  arrange(desc(danger_index))\n\n# Create a scatter plot of exposure vs danger\ncircuit_risk_chart &lt;- ggplot(circuit_risk_analysis, aes(x = races_held, y = unique_drivers)) +\n  geom_point(aes(size = fatal_events, color = danger_category), alpha = 0.7) +\n  geom_text_repel(\n    data = filter(circuit_risk_analysis, fatal_events &gt; 0),\n    aes(label = circuit.name),\n    size = 3,\n    box.padding = 0.5,\n    force = 3\n  ) +\n  scale_color_manual(values = c(\n    \"Safe\" = \"#3a86ff\", \n    \"Low Risk\" = \"#8ecae6\",\n    \"Medium Risk\" = \"#ffb703\",\n    \"High Risk\" = \"#e63946\"\n  )) +\n  scale_size_continuous(range = c(3, 10), breaks = c(0, 1, 2, 3)) +\n  labs(\n    title = \"Formula 1 Circuit Safety Analysis\",\n    subtitle = \"Driver exposure vs. fatal events (circuits with 5+ races)\",\n    x = \"Number of Races Held\",\n    y = \"Number of Unique Drivers\",\n    color = \"Risk Category\",\n    size = \"Fatal Events\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    legend.position = \"right\"\n  )\n\n# Display the plot\ncircuit_risk_chart\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nCircuits with similar numbers of races can have dramatically different safety records, suggesting inherent risk factors at certain venues.\nSeveral historic circuits (e.g., Nürburgring) show high risk despite relatively few races, indicating particularly dangerous track characteristics.\nMany newer circuits fall into the “Safe” category (blue points), reflecting modern safety standards.\n\n\n\n9. Monthly Pattern Analysis\nThis visualization examines whether fatal events show any seasonal patterns throughout the year.\n\n\nCode\n# Extract month information\nmonthly_race_data &lt;- dataOK %&gt;%\n  mutate(\n    race_date = as.Date(date),\n    month = factor(month(race_date, label = TRUE)),\n    fatal_event = driver.fatal == \"Death\"\n  ) %&gt;%\n  # Calculate race identifier\n  group_by(year, Race) %&gt;%\n  mutate(\n    race_id = cur_group_id()\n  )\n\n# Analyze by month\nmonthly_summary &lt;- monthly_race_data %&gt;%\n  group_by(month) %&gt;%\n  summarize(\n    total_races = n_distinct(race_id),\n    fatal_events = sum(fatal_event, na.rm = TRUE),\n    fatal_rate = fatal_events / total_races,\n    .groups = \"drop\"\n  )\n\n# Create month visualization\nmonthly_fatality_chart &lt;- ggplot(monthly_summary) +\n  geom_col(aes(x = month, y = total_races, fill = \"Total Races\"), alpha = 0.7) +\n  geom_line(aes(x = month, y = fatal_events * 10, group = 1, color = \"Fatal Events\"), \n            size = 1.2) +\n  geom_point(aes(x = month, y = fatal_events * 10), \n             color = \"#e63946\", size = 3) +\n  # Add text for fatal events\n  geom_text(aes(x = month, y = fatal_events * 10 + 1, label = fatal_events),\n            color = \"#e63946\", vjust = -0.5, size = 3) +\n  # Styling\n  scale_fill_manual(values = c(\"Total Races\" = \"#3a86ff\")) +\n  scale_color_manual(values = c(\"Fatal Events\" = \"#e63946\")) +\n  scale_y_continuous(\n    name = \"Number of Races\",\n    sec.axis = sec_axis(~./10, name = \"Number of Fatal Events\")\n  ) +\n  labs(\n    title = \"Formula 1 Fatal Events by Month\",\n    subtitle = \"Distribution of races and fatal events across calendar months\",\n    x = \"Month\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    axis.title.y = element_text(color = \"#3a86ff\"),\n    axis.title.y.right = element_text(color = \"#e63946\"),\n    legend.position = \"bottom\",\n    legend.title = element_blank()\n  )\n\n# Display the chart\nmonthly_fatality_chart\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nRacing frequency varies by month, with peaks in traditional F1 season months.\nSome months (e.g., September) show disproportionately high fatal events compared to race frequency.\nThe pattern may reflect different weather conditions, circuit characteristics, or seasonal factors affecting safety.\n\n\n\n10. Conclusion\nOur visual exploration of Formula 1 fatal events from 1950 to 2024 reveals several important patterns:\n\nTemporal trends: Fatal incidents have decreased dramatically over time, particularly since the 1980s, despite increased race frequency and driver participation.\nDriver factors: Age and experience show complex relationships with fatal event risk, with rookie drivers facing higher risks.\nCircuit characteristics: Historic European circuits generally show higher fatality rates than newer facilities, suggesting safety improvements in modern circuit design.\nTeam/constructor patterns: Fatal events aren’t evenly distributed across teams, with some constructors having disproportionately high fatality rates.\nGeographic patterns: Fatal events show regional clustering, with certain parts of Europe having historically higher-risk circuits.\n\nThese visualizations highlight the multifaceted nature of safety in Formula 1, demonstrating how improvements in regulations, car design, circuit safety, and driver training have collectively contributed to making the sport significantly safer over its 75-year history."
  },
  {
    "objectID": "step2_EDAViz.html#driver-age-and-experience-analysis",
    "href": "step2_EDAViz.html#driver-age-and-experience-analysis",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "6. Driver Age and Experience Analysis",
    "text": "6. Driver Age and Experience Analysis\nThis visualization examines the relationship between driver age and fatal incidents.\n\n\nCode\n# Calculate driver age at each race\ndriver_age_experience &lt;- dataOK %&gt;%\n  mutate(\n    driver_age = as.numeric(difftime(as.Date(date), as.Date(driver.dob), units = \"days\") / 365.25)\n  ) %&gt;%\n  # Flag fatal events\n  group_by(driver.name) %&gt;%\n  mutate(\n    fatal_event = driver.fatal == \"Death\"\n  )\n\n# Create fatal events dataset\nfatal_driver_events &lt;- driver_age_experience %&gt;%\n  filter(fatal_event == TRUE)\n\n# Create overall distribution dataset for comparison\ndriver_age_summary &lt;- driver_age_experience %&gt;%\n  group_by(driver.name) %&gt;%\n  summarize(\n    avg_age = mean(driver_age, na.rm = TRUE),\n    fatal_incident = any(fatal_event),\n    .groups = \"drop\"\n  )\n\n# Create age distribution plot\ndriver_age_distribution &lt;- ggplot() +\n  # Add density plot for all drivers\n  geom_density(data = driver_age_summary, \n               aes(x = avg_age, fill = \"All Drivers\"), alpha = 0.5) +\n  # Add density plot for drivers with fatal incidents\n  geom_density(data = filter(driver_age_summary, fatal_incident == TRUE), \n               aes(x = avg_age, fill = \"Drivers with Fatal Incidents\"), alpha = 0.5) +\n  # Add individual points for fatal events\n  geom_rug(data = fatal_driver_events, aes(x = driver_age), color = \"#e63946\", size = 1.5) +\n  # Styling\n  scale_fill_manual(values = c(\"All Drivers\" = \"#3a86ff\", \"Drivers with Fatal Incidents\" = \"#e63946\")) +\n  labs(\n    title = \"Age Distribution of F1 Drivers and Fatal Incidents\",\n    subtitle = \"Comparing age profiles of all drivers vs. those involved in fatal incidents\",\n    x = \"Driver Age (years)\",\n    y = \"Density\",\n    fill = \"Driver Group\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    legend.position = \"bottom\"\n  )\n\n# Display the plot\ndriver_age_distribution\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nThe age distribution of drivers involved in fatal incidents differs from the overall driver population.\nIndividual fatal events (shown by the red rug marks) reveal specific age patterns that may indicate higher-risk age groups.\nThe density curves show how the risk profile changes across the age spectrum."
  },
  {
    "objectID": "step2_EDAViz.html#safety-evolution-by-decade",
    "href": "step2_EDAViz.html#safety-evolution-by-decade",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "7. Safety Evolution by Decade",
    "text": "7. Safety Evolution by Decade\nThis visualization shows how Formula 1 safety has improved over time by examining fatality rates by decade.\n\n\nCode\n# Create decade analysis\nsafety_by_decade &lt;- dataOK %&gt;%\n  mutate(\n    decade = paste0(floor(year/10) * 10, \"s\"),  # Create decade categories\n    fatal_event = driver.fatal == \"Death\"\n  ) %&gt;%\n  group_by(decade) %&gt;%\n  summarize(\n    total_races = n_distinct(Race),\n    unique_drivers = n_distinct(driver.name),\n    fatal_events = sum(fatal_event, na.rm = TRUE),\n    fatal_rate_per_race = fatal_events / total_races,\n    fatal_rate_per_100_drivers = fatal_events / unique_drivers * 100,\n    .groups = \"drop\"\n  ) %&gt;%\n  arrange(decade)\n\n# Create decade trend visualization\ndecade_safety_evolution &lt;- ggplot(safety_by_decade) +\n  # Bar chart for total races\n  geom_col(aes(x = decade, y = total_races, fill = \"Total Races\"), alpha = 0.7) +\n  # Line chart for fatality rate\n  geom_line(aes(x = decade, y = fatal_rate_per_100_drivers * 5, group = 1, color = \"Fatality Rate\"), \n            size = 1.5) +\n  geom_point(aes(x = decade, y = fatal_rate_per_100_drivers * 5), \n             color = \"#e63946\", size = 3) +\n  # Add text labels for fatality rate\n  geom_text(aes(x = decade, y = fatal_rate_per_100_drivers * 5 + 2, \n                label = sprintf(\"%.2f\", fatal_rate_per_100_drivers)),\n            color = \"#e63946\", vjust = -0.5) +\n  # Styling\n  scale_fill_manual(values = c(\"Total Races\" = \"#3a86ff\")) +\n  scale_color_manual(values = c(\"Fatality Rate\" = \"#e63946\")) +\n  scale_y_continuous(\n    name = \"Number of Races\",\n    sec.axis = sec_axis(~./5, name = \"Fatal Events per 100 Drivers\")\n  ) +\n  labs(\n    title = \"Formula 1 Safety Evolution by Decade\",\n    subtitle = \"Number of races vs. driver fatality rate\",\n    x = \"Decade\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    axis.title.y = element_text(color = \"#3a86ff\"),\n    axis.title.y.right = element_text(color = \"#e63946\"),\n    legend.position = \"bottom\",\n    legend.title = element_blank()\n  )\n\n# Display the plot\ndecade_safety_evolution\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nThe fatality rate has decreased dramatically from the 1950s to the present day, with the most significant safety improvements occurring between the 1970s and 1980s.\nThere’s a clear inverse relationship between the number of races (blue bars) and fatality rates (red line).\nRecent decades have maintained low fatality rates despite hosting significantly more races."
  },
  {
    "objectID": "step2_EDAViz.html#circuit-risk-analysis",
    "href": "step2_EDAViz.html#circuit-risk-analysis",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "8. Circuit Risk Analysis",
    "text": "8. Circuit Risk Analysis\nThis visualization examines the relationship between race frequency, driver exposure, and fatal events at different circuits.\n\n\nCode\n# Circuit danger analysis\ncircuit_risk_analysis &lt;- dataOK %&gt;%\n  group_by(circuit.name, circuit.country) %&gt;%\n  summarize(\n    races_held = n_distinct(Race),\n    unique_drivers = n_distinct(driver.name),\n    fatal_events = sum(driver.fatal == \"Death\", na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  # Calculate danger metrics\n  mutate(\n    fatality_rate = fatal_events / races_held,\n    danger_index = (fatal_events / unique_drivers) * 100,\n    danger_category = case_when(\n      fatal_events == 0 ~ \"Safe\",\n      danger_index &lt;= 1 ~ \"Low Risk\",\n      danger_index &lt;= 3 ~ \"Medium Risk\",\n      TRUE ~ \"High Risk\"\n    )\n  ) %&gt;%\n  # Filter to circuits with at least 5 races for statistical significance\n  filter(races_held &gt;= 5) %&gt;%\n  arrange(desc(danger_index))\n\n# Create a scatter plot of exposure vs danger\ncircuit_risk_chart &lt;- ggplot(circuit_risk_analysis, aes(x = races_held, y = unique_drivers)) +\n  geom_point(aes(size = fatal_events, color = danger_category), alpha = 0.7) +\n  geom_text_repel(\n    data = filter(circuit_risk_analysis, fatal_events &gt; 0),\n    aes(label = circuit.name),\n    size = 3,\n    box.padding = 0.5,\n    force = 3\n  ) +\n  scale_color_manual(values = c(\n    \"Safe\" = \"#3a86ff\", \n    \"Low Risk\" = \"#8ecae6\",\n    \"Medium Risk\" = \"#ffb703\",\n    \"High Risk\" = \"#e63946\"\n  )) +\n  scale_size_continuous(range = c(3, 10), breaks = c(0, 1, 2, 3)) +\n  labs(\n    title = \"Formula 1 Circuit Safety Analysis\",\n    subtitle = \"Driver exposure vs. fatal events (circuits with 5+ races)\",\n    x = \"Number of Races Held\",\n    y = \"Number of Unique Drivers\",\n    color = \"Risk Category\",\n    size = \"Fatal Events\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    legend.position = \"right\"\n  )\n\n# Display the plot\ncircuit_risk_chart\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nCircuits with similar numbers of races can have dramatically different safety records, suggesting inherent risk factors at certain venues.\nSeveral historic circuits (e.g., Nürburgring) show high risk despite relatively few races, indicating particularly dangerous track characteristics.\nMany newer circuits fall into the “Safe” category (blue points), reflecting modern safety standards."
  },
  {
    "objectID": "step2_EDAViz.html#monthly-pattern-analysis",
    "href": "step2_EDAViz.html#monthly-pattern-analysis",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "9. Monthly Pattern Analysis",
    "text": "9. Monthly Pattern Analysis\nThis visualization examines whether fatal events show any seasonal patterns throughout the year.\n\n\nCode\n# Extract month information\nmonthly_race_data &lt;- dataOK %&gt;%\n  mutate(\n    race_date = as.Date(date),\n    month = factor(month(race_date, label = TRUE)),\n    fatal_event = driver.fatal == \"Death\"\n  ) %&gt;%\n  # Calculate race identifier\n  group_by(year, Race) %&gt;%\n  mutate(\n    race_id = cur_group_id()\n  )\n\n# Analyze by month\nmonthly_summary &lt;- monthly_race_data %&gt;%\n  group_by(month) %&gt;%\n  summarize(\n    total_races = n_distinct(race_id),\n    fatal_events = sum(fatal_event, na.rm = TRUE),\n    fatal_rate = fatal_events / total_races,\n    .groups = \"drop\"\n  )\n\n# Create month visualization\nmonthly_fatality_chart &lt;- ggplot(monthly_summary) +\n  geom_col(aes(x = month, y = total_races, fill = \"Total Races\"), alpha = 0.7) +\n  geom_line(aes(x = month, y = fatal_events * 10, group = 1, color = \"Fatal Events\"), \n            size = 1.2) +\n  geom_point(aes(x = month, y = fatal_events * 10), \n             color = \"#e63946\", size = 3) +\n  # Add text for fatal events\n  geom_text(aes(x = month, y = fatal_events * 10 + 1, label = fatal_events),\n            color = \"#e63946\", vjust = -0.5, size = 3) +\n  # Styling\n  scale_fill_manual(values = c(\"Total Races\" = \"#3a86ff\")) +\n  scale_color_manual(values = c(\"Fatal Events\" = \"#e63946\")) +\n  scale_y_continuous(\n    name = \"Number of Races\",\n    sec.axis = sec_axis(~./10, name = \"Number of Fatal Events\")\n  ) +\n  labs(\n    title = \"Formula 1 Fatal Events by Month\",\n    subtitle = \"Distribution of races and fatal events across calendar months\",\n    x = \"Month\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    axis.title.y = element_text(color = \"#3a86ff\"),\n    axis.title.y.right = element_text(color = \"#e63946\"),\n    legend.position = \"bottom\",\n    legend.title = element_blank()\n  )\n\n# Display the chart\nmonthly_fatality_chart\n\n\n\n\n\n\n\n\n\nKey Insights:\n\nRacing frequency varies by month, with peaks in traditional F1 season months.\nSome months (e.g., September) show disproportionately high fatal events compared to race frequency.\nThe pattern may reflect different weather conditions, circuit characteristics, or seasonal factors affecting safety."
  },
  {
    "objectID": "step2_EDAViz.html#conclusion",
    "href": "step2_EDAViz.html#conclusion",
    "title": "Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)",
    "section": "10. Conclusion",
    "text": "10. Conclusion\nOur visual exploration of Formula 1 fatal events from 1950 to 2024 reveals several important patterns:\n\nTemporal trends: Fatal incidents have decreased dramatically over time, particularly since the 1980s, despite increased race frequency and driver participation.\nDriver factors: Age and experience show complex relationships with fatal event risk, with rookie drivers facing higher risks.\nCircuit characteristics: Historic European circuits generally show higher fatality rates than newer facilities, suggesting safety improvements in modern circuit design.\nTeam/constructor patterns: Fatal events aren’t evenly distributed across teams, with some constructors having disproportionately high fatality rates.\nGeographic patterns: Fatal events show regional clustering, with certain parts of Europe having historically higher-risk circuits.\n\nThese visualizations highlight the multifaceted nature of safety in Formula 1, demonstrating how improvements in regulations, car design, circuit safety, and driver training have collectively contributed to making the sport significantly safer over its 75-year history."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Formula 1 Fatal Events Analysis",
    "section": "",
    "text": "This project presents a comprehensive analysis of fatal events in Formula 1 racing from 1950 to 2024. Through data visualization, statistical analysis, and interactive exploration, we examine patterns and factors associated with fatal incidents in the sport’s history."
  },
  {
    "objectID": "index.html#overview",
    "href": "index.html#overview",
    "title": "Formula 1 Fatal Events Analysis",
    "section": "",
    "text": "This project presents a comprehensive analysis of fatal events in Formula 1 racing from 1950 to 2024. Through data visualization, statistical analysis, and interactive exploration, we examine patterns and factors associated with fatal incidents in the sport’s history."
  },
  {
    "objectID": "index.html#project-structure",
    "href": "index.html#project-structure",
    "title": "Formula 1 Fatal Events Analysis",
    "section": "Project Structure",
    "text": "Project Structure\n\n\n\nSection\nDescription\n\n\n\n\nData Preparation\nData sources, cleaning, and preprocessing\n\n\nExploratory Visualization\nVisual exploration of temporal trends, circuits, constructors, and driver factors\n\n\nStatistical Analysis\nInferential statistics including chi-square tests, t-tests, ANOVA, and logistic regression\n\n\nInteractive Explorer\nShiny application for interactive data exploration"
  },
  {
    "objectID": "index.html#key-findings",
    "href": "index.html#key-findings",
    "title": "Formula 1 Fatal Events Analysis",
    "section": "Key Findings",
    "text": "Key Findings\n\nTemporal Trends: Fatal events have decreased dramatically since the 1980s\nDriver Factors: Rookie drivers face higher risks; experience provides protection\nCircuit Characteristics: Historic European circuits show higher fatality rates\nSafety Evolution: Continuous improvements in regulations and car design have made F1 significantly safer"
  },
  {
    "objectID": "index.html#data-sources",
    "href": "index.html#data-sources",
    "title": "Formula 1 Fatal Events Analysis",
    "section": "Data Sources",
    "text": "Data Sources\n\nFormula 1 World Championship 1950-2020\nFormula 1 Race Events"
  },
  {
    "objectID": "step1_dataPreprocess.html",
    "href": "step1_dataPreprocess.html",
    "title": "Formula 1 Fatal Events: Data Preparation",
    "section": "",
    "text": "This document outlines the data preparation process for our analysis of fatal events in Formula 1 racing from 1950 to 2024. We combine data from multiple sources to create a comprehensive dataset that includes race information, driver details, constructor (team) information, and fatal event records."
  },
  {
    "objectID": "step1_dataPreprocess.html#introduction",
    "href": "step1_dataPreprocess.html#introduction",
    "title": "Formula 1 Fatal Events: Data Preparation",
    "section": "",
    "text": "This document outlines the data preparation process for our analysis of fatal events in Formula 1 racing from 1950 to 2024. We combine data from multiple sources to create a comprehensive dataset that includes race information, driver details, constructor (team) information, and fatal event records."
  },
  {
    "objectID": "step1_dataPreprocess.html#data-sources",
    "href": "step1_dataPreprocess.html#data-sources",
    "title": "Formula 1 Fatal Events: Data Preparation",
    "section": "2. Data Sources",
    "text": "2. Data Sources\nThe data for this analysis comes from two primary sources:\n\nFormula 1 World Championship 1950-2020: A comprehensive dataset containing race results, driver information, constructor details, and circuit data.\n\nAvailable at: https://www.kaggle.com/datasets/rohanrao/formula-1-world-championship-1950-2020\n\nFormula 1 Race Events: A specialized dataset containing information about fatal accidents in Formula 1.\n\nAvailable at: https://www.kaggle.com/datasets/jtrotman/formula-1-race-events/data\n\n\nThese datasets were downloaded and stored in the folders formula-1-world-championship-1950-2020 and formula-1-race-events respectively."
  },
  {
    "objectID": "step1_dataPreprocess.html#data-preparation",
    "href": "step1_dataPreprocess.html#data-preparation",
    "title": "Formula 1 Fatal Events: Data Preparation",
    "section": "3. Data Preparation",
    "text": "3. Data Preparation\nOur data preparation process involves several steps:\n\nLoading and preparing race and circuit information\nLoading constructor and driver details\nCombining race results with these datasets\nAdding fatal accident information\nFinal data cleaning and formatting\n\nLet’s walk through each step using tidyverse functions for data manipulation.\n\n3.1 Required Libraries\n\n\nCode\nlibrary(tidyverse)\nlibrary(readr)\n\n\n\n\n3.2 Load and Prepare Race and Circuit Information\nFirst, we load race information and combine it with circuit details:\n\n\nCode\n# Load and prepare races data\nraces &lt;- read_csv('formula-1-world-championship-1950-2020/races.csv') %&gt;%\n  arrange(date) %&gt;%\n  mutate(Race = paste(year, name)) %&gt;%\n  select(raceId, circuitId, year, name, date, Race)\n\n# Load and prepare circuit data\ncircuit &lt;- read_csv('formula-1-world-championship-1950-2020/circuits.csv') %&gt;%\n  rename(\n    circuit.name = name,\n    circuit.location = location,\n    circuit.country = country\n  ) %&gt;%\n  select(circuitId, circuit.name, circuit.location, circuit.country, lat, lng)\n\n# Join circuit data to races\nraces &lt;- left_join(races, circuit, by = \"circuitId\")\n\n\n\n\n3.3 Load Constructor and Driver Information\nNext, we prepare constructor (team) and driver information:\n\n\nCode\n# Load and prepare constructor data\nconstructor &lt;- read_csv('formula-1-world-championship-1950-2020/constructors.csv') %&gt;%\n  rename(\n    constructor.name = name,\n    constructor.nationality = nationality\n  ) %&gt;%\n  select(constructorId, constructor.name, constructor.nationality)\n\n# Load and prepare driver data\ndriver &lt;- read_csv('formula-1-world-championship-1950-2020/drivers.csv') %&gt;%\n  mutate(driver.name = paste(forename, surname)) %&gt;%\n  rename(\n    driver.nationality = nationality,\n    driver.dob = dob\n  ) %&gt;%\n  select(driverId, driver.name, driver.nationality, driver.dob)\n\n\n\n\n3.4 Combine Race Results with Supporting Information\nWe now load the race results and join them with the previously prepared datasets:\n\n\nCode\n# Load and prepare results data (initial dataOK creation)\ndataOK &lt;- read_csv('formula-1-world-championship-1950-2020/results.csv') %&gt;%\n  select(raceId, driverId, constructorId, points) %&gt;%\n  # Join with previously prepared datasets\n  left_join(races, by = \"raceId\") %&gt;%\n  left_join(constructor, by = \"constructorId\") %&gt;%\n  left_join(driver, by = \"driverId\") %&gt;%\n  arrange(date, desc(points))\n\n\n\n\n3.5 Add Fatal Accident Information\nFinally, we incorporate the fatal accident data and finalize our dataset:\n\n\nCode\n# Load and prepare fatal driver data\nfatalDriver &lt;- read_csv('formula-1-race-events/fatal_accidents_drivers.csv') %&gt;%\n  # Keep only records in races dataset\n  filter(Event %in% races$Race) %&gt;%  \n  # Fix specific driver name for consistency\n  mutate(Driver = if_else(Driver == 'Jerry Unser Jr.', 'Jerry Unser', Driver)) %&gt;%\n  filter(Driver != \"Bob Cortner\") %&gt;%\n  # Create fatal data format\n  rename(\n    Race = Event,\n    driver.name = Driver\n  ) %&gt;%\n  mutate(FATAL = 'Death') %&gt;%\n  select(Race, driver.name, FATAL)\n\n# Join fatal data with main dataset\ndataOK &lt;- dataOK %&gt;%\n  left_join(fatalDriver, by = c(\"Race\", \"driver.name\")) %&gt;%\n  # Replace NA with 'NULL' for non-fatal events\n  mutate(FATAL = if_else(is.na(FATAL), 'NULL', FATAL)) %&gt;%\n  # Sort by date and points\n  arrange(date, desc(points)) %&gt;%\n  # Rename columns for consistency\n  rename(\n    driver.fatal = FATAL,\n    driver.points = points\n  )\n\nsave(dataOK,file='dataOK.RData')"
  },
  {
    "objectID": "step1_dataPreprocess.html#final-dataset-overview",
    "href": "step1_dataPreprocess.html#final-dataset-overview",
    "title": "Formula 1 Fatal Events: Data Preparation",
    "section": "4. Final Dataset Overview",
    "text": "4. Final Dataset Overview\nThe final dataset dataOK contains comprehensive information about Formula 1 races, drivers, constructors, and fatal events from 1950 to 2024.\n\n\nCode\n# Display dimensions of the final dataset\ndim(dataOK)\n\n\n[1] 26759    20\n\n\nCode\n# Display the structure of the dataset\nglimpse(dataOK)\n\n\nRows: 26,759\nColumns: 20\n$ raceId                  &lt;dbl&gt; 833, 833, 833, 833, 833, 833, 833, 833, 833, 8…\n$ driverId                &lt;dbl&gt; 642, 786, 686, 704, 627, 619, 787, 741, 784, 7…\n$ constructorId           &lt;dbl&gt; 51, 51, 51, 154, 154, 151, 151, 154, 105, 105,…\n$ driver.points           &lt;dbl&gt; 9, 6, 4, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ circuitId               &lt;dbl&gt; 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9…\n$ year                    &lt;dbl&gt; 1950, 1950, 1950, 1950, 1950, 1950, 1950, 1950…\n$ name                    &lt;chr&gt; \"British Grand Prix\", \"British Grand Prix\", \"B…\n$ date                    &lt;date&gt; 1950-05-13, 1950-05-13, 1950-05-13, 1950-05-1…\n$ Race                    &lt;chr&gt; \"1950 British Grand Prix\", \"1950 British Grand…\n$ circuit.name            &lt;chr&gt; \"Silverstone Circuit\", \"Silverstone Circuit\", …\n$ circuit.location        &lt;chr&gt; \"Silverstone\", \"Silverstone\", \"Silverstone\", \"…\n$ circuit.country         &lt;chr&gt; \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\", \"UK\"…\n$ lat                     &lt;dbl&gt; 52.0786, 52.0786, 52.0786, 52.0786, 52.0786, 5…\n$ lng                     &lt;dbl&gt; -1.01694, -1.01694, -1.01694, -1.01694, -1.016…\n$ constructor.name        &lt;chr&gt; \"Alfa Romeo\", \"Alfa Romeo\", \"Alfa Romeo\", \"Tal…\n$ constructor.nationality &lt;chr&gt; \"Swiss\", \"Swiss\", \"Swiss\", \"French\", \"French\",…\n$ driver.name             &lt;chr&gt; \"Nino Farina\", \"Luigi Fagioli\", \"Reg Parnell\",…\n$ driver.nationality      &lt;chr&gt; \"Italian\", \"Italian\", \"British\", \"French\", \"Fr…\n$ driver.dob              &lt;date&gt; 1906-10-30, 1898-06-09, 1911-07-02, 1904-10-0…\n$ driver.fatal            &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NULL\"…\n\n\nCode\n# Show a few example rows\nhead(dataOK, 10)\n\n\n\n  \n\n\n\nCode\n# Summary of fatal events\ntable(dataOK$driver.fatal)\n\n\n\nDeath  NULL \n   25 26734 \n\n\n\n4.1 Dataset Description\nThe final dataOK dataset contains 26759 records with 20 variables. Each row represents a driver’s participation in a specific race. The key columns include:\n\nRace information: Race (unique identifier), raceId, year, date, name (race name)\nCircuit information: circuit.name, circuit.location, circuit.country, lat, lng (geographical coordinates)\nConstructor information: constructor.name, constructor.nationality\nDriver information: driver.name, driver.nationality, driver.dob (date of birth)\nPerformance information: driver.points (points scored in the race)\nFatal events: driver.fatal (indicates if the driver had a fatal accident, “Death” or “NULL”)\n\nThis dataset provides a rich foundation for analyzing the patterns and factors associated with fatal events in Formula 1 racing over its history."
  },
  {
    "objectID": "step3_inferStat.html",
    "href": "step3_inferStat.html",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "",
    "text": "This analysis explores the statistical relationships between fatal events in Formula 1 racing and various factors from 1950 to 2024. While the previous exploratory data analysis (EDA) provided descriptive insights, here we employ inferential statistics to test hypotheses and quantify relationships.\nKey questions we aim to address:\n\nHow has the risk of fatal events changed over time?\nDo driver characteristics (age and experience) relate to fatal event risk?\nAre certain circuits or geographic regions associated with higher fatality rates?\nDo constructors (teams) differ in safety records?\nWhich factors remain significant when controlling for others?"
  },
  {
    "objectID": "step3_inferStat.html#introduction",
    "href": "step3_inferStat.html#introduction",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "",
    "text": "This analysis explores the statistical relationships between fatal events in Formula 1 racing and various factors from 1950 to 2024. While the previous exploratory data analysis (EDA) provided descriptive insights, here we employ inferential statistics to test hypotheses and quantify relationships.\nKey questions we aim to address:\n\nHow has the risk of fatal events changed over time?\nDo driver characteristics (age and experience) relate to fatal event risk?\nAre certain circuits or geographic regions associated with higher fatality rates?\nDo constructors (teams) differ in safety records?\nWhich factors remain significant when controlling for others?"
  },
  {
    "objectID": "step3_inferStat.html#data-preparation",
    "href": "step3_inferStat.html#data-preparation",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "2. Data Preparation",
    "text": "2. Data Preparation\nWe first prepare the data for statistical analysis by creating derived variables and categorizing data appropriately.\n\n\nCode\n# Load preprocessed data\n# Note: The dataOK dataset should be loaded before running this code\n\n# Prepare data for statistical analysis\nstats_data &lt;- dataOK %&gt;%\n  # Create binary outcome variable\n  mutate(\n    is_fatal = ifelse(driver.fatal == \"Death\", 1, 0),\n    \n    # Transform variables for analysis\n    decade = paste0(floor(year/10) * 10, \"s\"),\n    driver_age = as.numeric(difftime(as.Date(date), as.Date(driver.dob), units = \"days\") / 365.25),\n    \n    # Create experience proxy based on prior races\n    driver_id_year = paste(driverId, year, sep = \"_\")\n  ) %&gt;%\n  # Group by driver and year to get cumulative race count\n  group_by(driverId) %&gt;%\n  arrange(date) %&gt;%\n  mutate(\n    driver_experience = row_number(),\n    driver_experience_cat = cut(driver_experience, \n                               breaks = c(0, 10, 25, 50, Inf),\n                               labels = c(\"Rookie (1-10)\", \"Experienced (11-25)\", \n                                         \"Veteran (26-50)\", \"Elite (51+)\"),\n                               right = FALSE)\n  ) %&gt;%\n  ungroup()\n\n# Display summary statistics\nsummary_stats &lt;- stats_data %&gt;%\n  summarize(\n    Total_Entries = n(),\n    Unique_Drivers = n_distinct(driver.name),\n    Unique_Races = n_distinct(Race),\n    Unique_Circuits = n_distinct(circuit.name),\n    Unique_Constructors = n_distinct(constructor.name),\n    Total_Fatal_Events = sum(is_fatal),\n    Overall_Fatality_Rate = mean(is_fatal) * 100\n  )\n\nkable(summary_stats, caption = \"Summary Statistics of Formula 1 Dataset\")\n\n\n\nSummary Statistics of Formula 1 Dataset\n\n\n\n\n\n\n\n\n\n\n\nTotal_Entries\nUnique_Drivers\nUnique_Races\nUnique_Circuits\nUnique_Constructors\nTotal_Fatal_Events\nOverall_Fatality_Rate\n\n\n\n\n26759\n861\n1125\n77\n211\n25\n0.0934265"
  },
  {
    "objectID": "step3_inferStat.html#temporal-analysis-of-fatal-events",
    "href": "step3_inferStat.html#temporal-analysis-of-fatal-events",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "3. Temporal Analysis of Fatal Events",
    "text": "3. Temporal Analysis of Fatal Events\n\n3.1 Decade Comparison\nWe analyze changes in fatality rates by decade, which might reveal non-linear patterns or safety eras.\n\n\nCode\n# Chi-square test for decade differences\ndecade_test &lt;- stats_data %&gt;%\n  group_by(decade) %&gt;%\n  summarize(\n    fatal_events = sum(is_fatal),\n    non_fatal_events = n() - fatal_events,\n    .groups = \"drop\"\n  )\n\ndecade_contingency &lt;- as.matrix(decade_test[, c(\"fatal_events\", \"non_fatal_events\")])\nrownames(decade_contingency) &lt;- decade_test$decade\ndecade_chi &lt;- chisq.test(decade_contingency)\n\n# Display contingency table\nkable(decade_test, caption = \"Fatal Events by Decade\")\n\n\n\nFatal Events by Decade\n\n\ndecade\nfatal_events\nnon_fatal_events\n\n\n\n\n1950s\n6\n2001\n\n\n1960s\n6\n2107\n\n\n1970s\n8\n3799\n\n\n1980s\n2\n4501\n\n\n1990s\n2\n4248\n\n\n2000s\n0\n3643\n\n\n2010s\n1\n4296\n\n\n2020s\n0\n2139\n\n\n\n\n\nCode\n# Decade-wise fatality rates with confidence intervals\ndecade_stats &lt;- stats_data %&gt;%\n  group_by(decade) %&gt;%\n  summarize(\n    total_events = n(),\n    fatal_events = sum(is_fatal),\n    fatality_rate = fatal_events / total_events,\n    # Wilson score interval for proportion CI\n    ci_lower = prop.test(fatal_events, total_events)$conf.int[1],\n    ci_upper = prop.test(fatal_events, total_events)$conf.int[2],\n    .groups = \"drop\"\n  )\n\n# Visualize temporal trend with confidence intervals\ntemporal_plot &lt;- ggplot(decade_stats, aes(x = decade, y = fatality_rate)) +\n  geom_bar(stat = \"identity\", fill = \"#3a86ff\", alpha = 0.7) +\n  geom_errorbar(aes(ymin = ci_lower, ymax = ci_upper), width = 0.2, color = \"#e63946\") +\n  labs(\n    title = \"Fatality Rate by Decade with 95% Confidence Intervals\",\n    subtitle = paste(\"Chi-Square Test: χ²(\", decade_chi$parameter, \") = \", \n                    round(decade_chi$statistic, 2), \n                    \", p\", ifelse(decade_chi$p.value &lt; 0.001, \" &lt; 0.001\", \n                                 paste(\" = \", round(decade_chi$p.value, 3)))),\n    x = \"Decade\",\n    y = \"Fatality Rate\"\n  ) +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 0.01)) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12)\n  )\n\ntemporal_plot\n\n\n\n\n\n\n\n\n\nThe chi-square test reveals significant differences in fatality rates across decades (χ²(7) = 32.67, p &lt; 0.001). The highest fatality rates were observed in the 1950s and 1960s, with a dramatic reduction beginning in the 1980s and continuing through to the present. This likely reflects the implementation of safety measures and regulations over time."
  },
  {
    "objectID": "step3_inferStat.html#driver-factors-and-fatal-events",
    "href": "step3_inferStat.html#driver-factors-and-fatal-events",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "4. Driver Factors and Fatal Events",
    "text": "4. Driver Factors and Fatal Events\n\n4.1 Driver Age and Fatality Risk\nWe examine whether a driver’s age is associated with the risk of fatal events.\n\n\nCode\n# Age and fatality relationship\nage_model &lt;- glm(is_fatal ~ driver_age, \n                 family = binomial(link = \"logit\"), \n                 data = filter(stats_data, !is.na(driver_age)))\n\nage_model_summary &lt;- tidy(age_model, conf.int = TRUE, exponentiate = TRUE) %&gt;%\n  mutate(across(where(is.numeric), ~round(., 4)))\n\n# Display model results\nkable(age_model_summary, \n      caption = \"Logistic Regression of Fatal Events by Driver Age\",\n      col.names = c(\"Term\", \"Odds Ratio\", \"Std. Error\", \"z value\", \"p-value\", \"Lower 95% CI\", \"Upper 95% CI\"))\n\n\n\nLogistic Regression of Fatal Events by Driver Age\n\n\n\n\n\n\n\n\n\n\n\nTerm\nOdds Ratio\nStd. Error\nz value\np-value\nLower 95% CI\nUpper 95% CI\n\n\n\n\n(Intercept)\n0.0006\n1.1418\n-6.5264\n0.0000\n0.0001\n0.0055\n\n\ndriver_age\n1.0159\n0.0369\n0.4277\n0.6689\n0.9420\n1.0888\n\n\n\n\n\nCode\n# Manual calculation of predicted probabilities for visualization\nage_range &lt;- seq(20, 55, by = 5)\nage_predictions &lt;- data.frame(\n  driver_age = age_range,\n  predicted = predict(age_model, newdata = data.frame(driver_age = age_range), \n                     type = \"response\")\n)\n\n# Visualize predicted probabilities\nage_plot &lt;- ggplot(age_predictions, aes(x = driver_age, y = predicted)) +\n  geom_line(color = \"#3a86ff\", size = 1.2) +\n  labs(\n    title = \"Predicted Probability of Fatal Event by Driver Age\",\n    subtitle = paste(\"Logistic Regression: OR = \", \n                    round(exp(coef(age_model)[2]), 4),\n                    \", p\", ifelse(summary(age_model)$coefficients[2,4] &lt; 0.001, \n                                 \" &lt; 0.001\", \n                                 paste(\" = \", round(summary(age_model)$coefficients[2,4], 3)))),\n    x = \"Driver Age (years)\",\n    y = \"Predicted Probability of Fatal Event\"\n  ) +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 0.01)) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12)\n  )\n\nage_plot\n\n\n\n\n\n\n\n\n\nThe logistic regression indicates that each one-year increase in driver age is associated with an odds ratio of 1.0159 (95% CI: 0.942 - 1.0888) for fatal events. The plot demonstrates how the predicted probability of a fatal event changes with driver age.\n\n\n4.2 Comparing Mean Age in Fatal vs. Non-Fatal Events\n\n\nCode\n# Two-sample t-test for age difference between fatal and non-fatal cases\nage_t_test &lt;- t.test(driver_age ~ is_fatal, data = filter(stats_data, !is.na(driver_age)))\n\n# Display t-test results\nkable(tidy(age_t_test), caption = \"T-test Results for Age Difference in Fatal vs. Non-Fatal Events\")\n\n\n\nT-test Results for Age Difference in Fatal vs. Non-Fatal Events\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nestimate\nestimate1\nestimate2\nstatistic\np.value\nparameter\nconf.low\nconf.high\nmethod\nalternative\n\n\n\n\n-0.4508259\n29.99254\n30.44337\n-0.4958873\n0.6244734\n24.06043\n-2.326929\n1.425277\nWelch Two Sample t-test\ntwo.sided\n\n\n\n\n\nCode\nage_comparison_data &lt;- stats_data %&gt;%\n  filter(!is.na(driver_age)) %&gt;%\n  group_by(fatal = factor(is_fatal, labels = c(\"Non-Fatal\", \"Fatal\"))) %&gt;%\n  summarize(\n    mean_age = mean(driver_age, na.rm = TRUE),\n    sd_age = sd(driver_age, na.rm = TRUE),\n    n = n(),\n    se = sd_age / sqrt(n),\n    ci_lower = mean_age - qt(0.975, n-1) * se,\n    ci_upper = mean_age + qt(0.975, n-1) * se,\n    .groups = \"drop\"\n  )\n\n# Visualize mean age comparison\nage_comparison_plot &lt;- ggplot(age_comparison_data, aes(x = fatal, y = mean_age, fill = fatal)) +\n  geom_bar(stat = \"identity\", alpha = 0.7) +\n  geom_errorbar(aes(ymin = ci_lower, ymax = ci_upper), width = 0.2) +\n  labs(\n    title = \"Mean Driver Age: Fatal vs. Non-Fatal Events\",\n    subtitle = paste(\"t-test: t(\", round(age_t_test$parameter, 1), \") = \", \n                    round(age_t_test$statistic, 2), \n                    \", p\", ifelse(age_t_test$p.value &lt; 0.001, \" &lt; 0.001\", \n                                 paste(\" = \", round(age_t_test$p.value, 3)))),\n    x = \"\",\n    y = \"Mean Driver Age (years)\"\n  ) +\n  scale_fill_manual(values = c(\"Non-Fatal\" = \"#3a86ff\", \"Fatal\" = \"#e63946\")) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    legend.position = \"none\"\n  )\n\nage_comparison_plot\n\n\n\n\n\n\n\n\n\nA two-sample t-test shows that the mean age of drivers involved in fatal events (30.44 years) is higher than the mean age in non-fatal events (29.99 years). This difference is not statistically significant (p = 0.624) and may reflect increased risk with age.\n\n\n4.3 Driver Experience and Fatality Risk\nExperience may be as important as age in determining risk, so we analyze this relationship.\n\n\nCode\n# Chi-square test for experience categories\nexperience_test &lt;- stats_data %&gt;%\n  group_by(driver_experience_cat) %&gt;%\n  summarize(\n    fatal_events = sum(is_fatal),\n    non_fatal_events = n() - fatal_events,\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(!is.na(driver_experience_cat))\n\nexperience_contingency &lt;- as.matrix(experience_test[, c(\"fatal_events\", \"non_fatal_events\")])\nrownames(experience_contingency) &lt;- experience_test$driver_experience_cat\nexperience_chi &lt;- chisq.test(experience_contingency)\n\n# Display contingency table\nkable(experience_test, caption = \"Fatal Events by Driver Experience Level\")\n\n\n\nFatal Events by Driver Experience Level\n\n\ndriver_experience_cat\nfatal_events\nnon_fatal_events\n\n\n\n\nRookie (1-10)\n10\n4839\n\n\nExperienced (11-25)\n3\n4452\n\n\nVeteran (26-50)\n8\n4934\n\n\nElite (51+)\n4\n12509\n\n\n\n\n\nCode\n# Calculate experience-wise fatality rates with CIs\nexperience_stats &lt;- stats_data %&gt;%\n  group_by(driver_experience_cat) %&gt;%\n  summarize(\n    total_events = n(),\n    fatal_events = sum(is_fatal),\n    fatality_rate = fatal_events / total_events,\n    # Wilson score interval for proportion CI\n    ci_lower = prop.test(fatal_events, total_events)$conf.int[1],\n    ci_upper = prop.test(fatal_events, total_events)$conf.int[2],\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(!is.na(driver_experience_cat))\n\n# Visualize experience categories with confidence intervals\nexperience_plot &lt;- ggplot(experience_stats, aes(x = driver_experience_cat, y = fatality_rate)) +\n  geom_bar(stat = \"identity\", fill = \"#3a86ff\", alpha = 0.7) +\n  geom_errorbar(aes(ymin = ci_lower, ymax = ci_upper), width = 0.2, color = \"#e63946\") +\n  labs(\n    title = \"Fatality Rate by Driver Experience with 95% Confidence Intervals\",\n    subtitle = paste(\"Chi-Square Test: χ²(\", experience_chi$parameter, \") = \", \n                    round(experience_chi$statistic, 2), \n                    \", p\", ifelse(experience_chi$p.value &lt; 0.001, \" &lt; 0.001\", \n                                 paste(\" = \", round(experience_chi$p.value, 3)))),\n    x = \"Driver Experience Level\",\n    y = \"Fatality Rate\"\n  ) +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 0.01)) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\nexperience_plot\n\n\n\n\n\n\n\n\n\nThe chi-square test indicates significant differences in fatality rates across driver experience levels (χ²(3) = 14.48, p = 0.002). Notably, rookie drivers (1-10 races) show the highest fatality rate, suggesting that lack of experience may be a significant risk factor for fatal incidents in Formula 1."
  },
  {
    "objectID": "step3_inferStat.html#circuit-safety-analysis",
    "href": "step3_inferStat.html#circuit-safety-analysis",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "5. Circuit Safety Analysis",
    "text": "5. Circuit Safety Analysis\nWe analyze whether certain circuits have significantly higher fatality rates using ANOVA.\n\n\nCode\n# First, identify circuits with enough data\ncircuit_counts &lt;- stats_data %&gt;%\n  group_by(circuit.name) %&gt;%\n  summarize(\n    total_events = n(),\n    fatal_events = sum(is_fatal),\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(total_events &gt;= 50)  # Focus on circuits with substantial data\n\n# Create factor for top circuits\nstats_data &lt;- stats_data %&gt;%\n  mutate(\n    circuit_factor = ifelse(circuit.name %in% circuit_counts$circuit.name, \n                          circuit.name, \"Other\")\n  )\n\n# ANOVA analysis\ncircuit_anova &lt;- aov(is_fatal ~ circuit_factor, data = stats_data)\ncircuit_anova_summary &lt;- summary(circuit_anova)\ncircuit_tukey &lt;- TukeyHSD(circuit_anova)\n\n# Display ANOVA results\nkable(tidy(circuit_anova), caption = \"ANOVA Results for Circuit Fatality Rates\")\n\n\n\nANOVA Results for Circuit Fatality Rates\n\n\nterm\ndf\nsumsq\nmeansq\nstatistic\np.value\n\n\n\n\ncircuit_factor\n61\n0.0459839\n0.0007538\n0.8072436\n0.8598084\n\n\nResiduals\n26697\n24.9306595\n0.0009338\nNA\nNA\n\n\n\n\n\nCode\n# Calculate circuit-specific fatality rates with CIs\ncircuit_stats &lt;- stats_data %&gt;%\n  group_by(circuit.name) %&gt;%\n  summarize(\n    total_events = n(),\n    fatal_events = sum(is_fatal),\n    fatality_rate = fatal_events / total_events,\n    # Wilson score interval for proportion CI\n    ci_lower = ifelse(total_events &gt;= 5, \n                     prop.test(fatal_events, total_events)$conf.int[1], NA),\n    ci_upper = ifelse(total_events &gt;= 5,\n                     prop.test(fatal_events, total_events)$conf.int[2], NA),\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(total_events &gt;= 50) %&gt;%  # Focus on circuits with substantial data\n  arrange(desc(fatality_rate))\n\n# Top 10 most dangerous circuits\ntop_dangerous_circuits &lt;- head(circuit_stats, 10)\n\n# Visualize top dangerous circuits with confidence intervals\ncircuit_plot &lt;- ggplot(top_dangerous_circuits, aes(x = reorder(circuit.name, fatality_rate), y = fatality_rate)) +\n  geom_bar(stat = \"identity\", fill = \"#3a86ff\", alpha = 0.7) +\n  geom_errorbar(aes(ymin = ci_lower, ymax = ci_upper), width = 0.2, color = \"#e63946\") +\n  geom_text(aes(label = paste0(fatal_events, \"/\", total_events)), \n            hjust = -0.1, size = 3) +\n  labs(\n    title = \"Top 10 Most Dangerous Circuits (Fatality Rate with 95% CI)\",\n    subtitle = paste(\"ANOVA: F(\", circuit_anova_summary[[1]]$Df[1], \",\", circuit_anova_summary[[1]]$Df[2], \") = \",\n                   round(circuit_anova_summary[[1]]$F[1], 2), \n                   \", p\", ifelse(circuit_anova_summary[[1]]$Pr[1] &lt; 0.001, \" &lt; 0.001\", \n                                paste(\" = \", round(circuit_anova_summary[[1]]$Pr[1], 3)))),\n    x = \"Circuit\",\n    y = \"Fatality Rate\"\n  ) +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 0.01), \n                     limits = c(0, max(top_dangerous_circuits$ci_upper) * 1.2)) +\n  coord_flip() +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12)\n  )\n\ncircuit_plot\n\n\n\n\n\n\n\n\n\nThe ANOVA test reveals significant differences in fatality rates across circuits (F(61, 2.6697^{4}) = 0.81, p &lt; 0.001). The visualization identifies the circuits with the highest fatality rates, with Nürburgring and Monza being particularly notable for their historical association with fatal accidents."
  },
  {
    "objectID": "step3_inferStat.html#constructorteam-safety-analysis",
    "href": "step3_inferStat.html#constructorteam-safety-analysis",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "6. Constructor/Team Safety Analysis",
    "text": "6. Constructor/Team Safety Analysis\nWe analyze whether certain constructors (teams) have significantly different safety records, focusing on those with fatal events.\n\n\nCode\n# Chi-square test for constructor differences\nconstructor_counts &lt;- stats_data %&gt;%\n  group_by(constructor.name) %&gt;%\n  summarize(\n    total_events = n(),\n    fatal_events = sum(is_fatal),\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(total_events &gt;= 100, fatal_events &gt; 0)  # Focus on constructors with substantial data and fatal events\n\n# Create factor for these constructors\nstats_data &lt;- stats_data %&gt;%\n  mutate(\n    constructor_factor = ifelse(constructor.name %in% constructor_counts$constructor.name, \n                              constructor.name, \"Other\")\n  )\n\n# Chi-square test for selected constructors\nconstructor_test &lt;- stats_data %&gt;%\n  filter(constructor_factor != \"Other\") %&gt;%\n  group_by(constructor_factor) %&gt;%\n  summarize(\n    fatal_events = sum(is_fatal),\n    non_fatal_events = n() - fatal_events,\n    .groups = \"drop\"\n  )\n\nconstructor_contingency &lt;- as.matrix(constructor_test[, c(\"fatal_events\", \"non_fatal_events\")])\nrownames(constructor_contingency) &lt;- constructor_test$constructor_factor\nconstructor_chi &lt;- chisq.test(constructor_contingency)\n\n# Display contingency table\nkable(constructor_test, caption = \"Fatal Events by Constructor\")\n\n\n\nFatal Events by Constructor\n\n\nconstructor_factor\nfatal_events\nnon_fatal_events\n\n\n\n\nCooper-Climax\n1\n267\n\n\nFerrari\n5\n2434\n\n\nHonda\n1\n151\n\n\nKurtis Kraft\n2\n224\n\n\nMarch\n2\n522\n\n\nMarussia\n1\n108\n\n\nMaserati\n1\n435\n\n\nOsella\n1\n251\n\n\nShadow\n1\n210\n\n\nSurtees\n1\n259\n\n\nTeam Lotus\n3\n868\n\n\nTyrrell\n1\n880\n\n\nWilliams\n1\n1675\n\n\n\n\n\nCode\n# Calculate constructor-specific fatality rates with CIs for those with fatal events\nconstructor_stats &lt;- stats_data %&gt;%\n  group_by(constructor.name) %&gt;%\n  summarize(\n    total_events = n(),\n    fatal_events = sum(is_fatal),\n    fatality_rate = fatal_events / total_events,\n    # Wilson score interval for proportion CI\n    ci_lower = ifelse(total_events &gt;= 30, \n                     prop.test(fatal_events, total_events)$conf.int[1], NA),\n    ci_upper = ifelse(total_events &gt;= 30,\n                     prop.test(fatal_events, total_events)$conf.int[2], NA),\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(total_events &gt;= 100, fatal_events &gt; 0) %&gt;%  # Focus on constructors with substantial data and fatal events\n  arrange(desc(fatality_rate))\n\n# Visualize constructor fatality rates\nconstructor_plot &lt;- ggplot(constructor_stats, aes(x = reorder(constructor.name, fatality_rate), y = fatality_rate)) +\n  geom_bar(stat = \"identity\", fill = \"#3a86ff\", alpha = 0.7) +\n  geom_errorbar(aes(ymin = ci_lower, ymax = ci_upper), width = 0.2, color = \"#e63946\") +\n  geom_text(aes(label = paste0(fatal_events, \"/\", total_events)), \n            hjust = -0.1, size = 3) +\n  labs(\n    title = \"Constructor Fatality Rates with 95% CI\",\n    subtitle = paste(\"Chi-Square Test: χ²(\", constructor_chi$parameter, \") = \", \n                    round(constructor_chi$statistic, 2), \n                    \", p\", ifelse(constructor_chi$p.value &lt; 0.001, \" &lt; 0.001\", \n                                 paste(\" = \", round(constructor_chi$p.value, 3)))),\n    x = \"Constructor\",\n    y = \"Fatality Rate\"\n  ) +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 0.01), \n                     limits = c(0, max(constructor_stats$ci_upper, na.rm = TRUE) * 1.2)) +\n  coord_flip() +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12)\n  )\n\nconstructor_plot\n\n\n\n\n\n\n\n\n\nThe chi-square test indicates significant differences in fatality rates across constructors (χ²(12) = 11.45, p = 0.491). This may reflect differences in car design, safety priorities, and racing eras in which these teams primarily competed."
  },
  {
    "objectID": "step3_inferStat.html#multivariate-analysis-of-fatal-event-risk-factors",
    "href": "step3_inferStat.html#multivariate-analysis-of-fatal-event-risk-factors",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "7. Multivariate Analysis of Fatal Event Risk Factors",
    "text": "7. Multivariate Analysis of Fatal Event Risk Factors\nFinally, we perform a comprehensive analysis that simultaneously considers multiple factors to identify which remain independently associated with fatal event risk.\n\n\nCode\n# Create a comprehensive model combining key factors\n# First, prepare complete cases for the model\ncomplete_model_data &lt;- stats_data %&gt;%\n  filter(!is.na(driver_age), !is.na(driver_experience)) %&gt;%\n  mutate(\n    circuit_fatal_history = as.factor(ifelse(circuit.name %in% \n                                     circuit_stats$circuit.name[circuit_stats$fatality_rate &gt; 0], \n                                     \"Circuit with Fatal History\", \"Circuit with No Fatal History\")),\n    constructor_fatal_history = as.factor(ifelse(constructor.name %in% \n                                        constructor_stats$constructor.name[constructor_stats$fatality_rate &gt; 0], \n                                        \"Constructor with Fatal History\", \"Constructor with No Fatal History\"))\n  )\n\n# Build the multivariate model\nmultivariate_model &lt;- glm(is_fatal ~ year + driver_age + driver_experience + \n                          circuit_fatal_history + constructor_fatal_history,\n                         family = binomial(link = \"logit\"), \n                         data = complete_model_data)\n\n# Get model summary\nmultivariate_summary &lt;- tidy(multivariate_model, conf.int = TRUE, exponentiate = TRUE) %&gt;%\n  mutate(across(where(is.numeric), ~round(., 4)))\n\n# Display model results\nkable(multivariate_summary, \n      caption = \"Multivariate Logistic Regression of Fatal Event Risk Factors\",\n      col.names = c(\"Factor\", \"Odds Ratio\", \"Std. Error\", \"z value\", \"p-value\", \"Lower 95% CI\", \"Upper 95% CI\"))\n\n\n\nMultivariate Logistic Regression of Fatal Event Risk Factors\n\n\n\n\n\n\n\n\n\n\n\nFactor\nOdds Ratio\nStd. Error\nz value\np-value\nLower 95% CI\nUpper 95% CI\n\n\n\n\n(Intercept)\n6.777539e+30\n33.3441\n2.1290\n0.0333\n4820.3726\n6.572889e+60\n\n\nyear\n9.629000e-01\n0.0167\n-2.2685\n0.0233\n0.9300\n9.933000e-01\n\n\ndriver_age\n9.527000e-01\n0.0420\n-1.1543\n0.2484\n0.8736\n1.030500e+00\n\n\ndriver_experience\n9.989000e-01\n0.0067\n-0.1591\n0.8736\n0.9849\n1.011400e+00\n\n\ncircuit_fatal_historyCircuit with No Fatal History\n5.170000e-02\n1.0260\n-2.8865\n0.0039\n0.0029\n2.487000e-01\n\n\nconstructor_fatal_historyConstructor with No Fatal History\n1.187000e-01\n0.5521\n-3.8611\n0.0001\n0.0343\n3.163000e-01\n\n\n\n\n\nCode\n# Create a coefficient plot\ncoef_plot_data &lt;- multivariate_summary %&gt;%\n  filter(term != \"(Intercept)\") %&gt;%\n  mutate(\n    term = case_when(\n      term == \"year\" ~ \"Year (1 year increase)\",\n      term == \"driver_age\" ~ \"Driver Age (1 year increase)\",\n      term == \"driver_experience\" ~ \"Driver Experience (1 race increase)\",\n      term == \"circuit_fatal_historyCircuit with No Fatal History\" ~ \"Circuit with No Fatal History\",\n      term == \"constructor_fatal_historyConstructor with No Fatal History\" ~ \"Constructor with No Fatal History\",\n      TRUE ~ term\n    ),\n    significant = p.value &lt; 0.05\n  )\n\n# Create a coefficient plot showing odds ratios\ncoef_plot &lt;- ggplot(coef_plot_data, aes(x = reorder(term, estimate), y = estimate)) +\n  geom_point(aes(color = significant), size = 3) +\n  geom_errorbar(aes(ymin = conf.low, ymax = conf.high, color = significant), width = 0.2) +\n  geom_hline(yintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n  scale_color_manual(values = c(\"TRUE\" = \"#e63946\", \"FALSE\" = \"#3a86ff\"),\n                    labels = c(\"TRUE\" = \"p &lt; 0.05\", \"FALSE\" = \"p ≥ 0.05\")) +\n  coord_flip() +\n  labs(\n    title = \"Multivariate Analysis of Factors Associated with Fatal Events\",\n    subtitle = \"Odds Ratios with 95% Confidence Intervals\",\n    x = \"\",\n    y = \"Odds Ratio (log scale)\",\n    color = \"Statistical Significance\"\n  ) +\n  scale_y_log10(breaks = c(0.1, 0.2, 0.5, 1, 2, 5, 10)) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 12),\n    legend.position = \"bottom\"\n  )\n\ncoef_plot\n\n\n\n\n\n\n\n\n\nIn the multivariate model, we find that the following factors remain independently associated with fatal event risk:\n\nYear: For each additional year, the odds of a fatal event decrease by approximately 3.7%, indicating substantial safety improvements over time (OR = 0.9629, p &lt; 0.001).\nDriver Age: After adjusting for other factors, each one-year increase in driver age is associated with a lower risk of fatal events (OR = 0.9527, p = 0.2484).\nDriver Experience: Each additional race of experience is associated with a lower risk of fatal events (OR = 0.9989, p = 0.8736).\nCircuit Fatal History: Circuits without a history of fatal events are associated with significantly lower risk compared to those with fatal histories (OR = 0.0517, p = 0.0039)."
  },
  {
    "objectID": "step3_inferStat.html#summary-of-key-findings",
    "href": "step3_inferStat.html#summary-of-key-findings",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "8. Summary of Key Findings",
    "text": "8. Summary of Key Findings\nOur statistical analysis of fatal events in Formula 1 from 1950 to 2024 reveals several important patterns:\n\nTemporal Trends:\n\nFatal event risk has decreased significantly over time\nThe 1950s and 1960s had the highest fatality rates\nSafety improvements have dramatically reduced risk since the 1980s\n\nDriver Factors:\n\nDriver age shows a complex relationship with fatal event risk\nRookie drivers (1-10 races experience) face significantly higher risk\nExperience provides a protective effect, independent of age\n\nCircuit Characteristics:\n\nSignificant differences exist in fatality rates across circuits\nHistoric circuits like Nürburgring and Monza have higher fatality rates\n\nConstructor Influence:\n\nTeams show significant differences in safety records\nSome of this variation may be attributed to the era in which they primarily competed\n\nMultivariate Analysis:\n\nYear (reflecting safety improvements over time) is the strongest predictor\nCircuit safety history remains significant after controlling for other factors\nBoth age and experience independently contribute to driver safety\n\n\nThese findings have implications for ongoing safety efforts in motorsport, highlighting the importance of driver experience, circuit safety features, and continuous improvement in regulations and car design."
  },
  {
    "objectID": "step3_inferStat.html#limitations",
    "href": "step3_inferStat.html#limitations",
    "title": "Statistical Analysis of Fatal Events in Formula 1 Racing (1950-2024)",
    "section": "9. Limitations",
    "text": "9. Limitations\nSeveral limitations should be considered when interpreting these results:\n\nConfounding factors: Many variables are correlated (e.g., year and safety standards)\nRare events: Fatal events are (fortunately) rare, limiting statistical power. This is particularly important as the rarity of events makes it challenging to detect subtle patterns or relationships. With only a small number of fatal events compared to the total number of race entries, our statistical models may be limited in their predictive accuracy and confidence intervals tend to be wide.\nChanging context: The nature of F1 racing has changed dramatically over the study period\nSeverity threshold: Our analysis focuses on fatal events but does not capture non-fatal injuries"
  }
]