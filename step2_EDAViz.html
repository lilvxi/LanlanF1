<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Formula 1 Fatal Events: Data Visualization Analysis (1950-2024) – Formula 1 Fatal Events Analysis (1950-2024)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-a6e161b2431e1f94a14e0f5d32135a3c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-273b267af958cc9ed3c8dff77cc2ba72.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>

<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>

<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">

<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>



<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="https://www.formula1.com/etc/designs/fom-website/images/f1_logo.svg" alt="F1 Logo" class="navbar-logo light-content">
    <img src="https://www.formula1.com/etc/designs/fom-website/images/f1_logo.svg" alt="F1 Logo" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Formula 1 Fatal Events Analysis (1950-2024)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./step1_dataPreprocess.html"> 
<span class="menu-text">Data Preparation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./step2_EDAViz.html" aria-current="page"> 
<span class="menu-text">Visualization</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./step3_inferStat.html"> 
<span class="menu-text">Statistical Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./step4_shiny.html"> 
<span class="menu-text">Interactive Explorer</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/yourusername/LanlanF1"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">1. Introduction</a></li>
  <li><a href="#temporal-trends-in-fatal-events" id="toc-temporal-trends-in-fatal-events" class="nav-link" data-scroll-target="#temporal-trends-in-fatal-events">2. Temporal Trends in Fatal Events</a>
  <ul class="collapse">
  <li><a href="#annual-driver-participation-and-fatal-events" id="toc-annual-driver-participation-and-fatal-events" class="nav-link" data-scroll-target="#annual-driver-participation-and-fatal-events">2.1 Annual Driver Participation and Fatal Events</a></li>
  <li><a href="#annual-races-and-fatal-event-occurrence" id="toc-annual-races-and-fatal-event-occurrence" class="nav-link" data-scroll-target="#annual-races-and-fatal-event-occurrence">2.2 Annual Races and Fatal Event Occurrence</a></li>
  </ul></li>
  <li><a href="#constructorteam-analysis" id="toc-constructorteam-analysis" class="nav-link" data-scroll-target="#constructorteam-analysis">3. Constructor/Team Analysis</a>
  <ul class="collapse">
  <li><a href="#distribution-of-fatal-events-by-constructor" id="toc-distribution-of-fatal-events-by-constructor" class="nav-link" data-scroll-target="#distribution-of-fatal-events-by-constructor">3.1 Distribution of Fatal Events by Constructor</a></li>
  </ul></li>
  <li><a href="#driver-nationality-analysis" id="toc-driver-nationality-analysis" class="nav-link" data-scroll-target="#driver-nationality-analysis">4. Driver Nationality Analysis</a>
  <ul class="collapse">
  <li><a href="#driver-nationalities-and-fatality-rates" id="toc-driver-nationalities-and-fatality-rates" class="nav-link" data-scroll-target="#driver-nationalities-and-fatality-rates">4.1 Driver Nationalities and Fatality Rates</a></li>
  <li><a href="#nationality-data-table" id="toc-nationality-data-table" class="nav-link" data-scroll-target="#nationality-data-table">4.2 Nationality Data Table</a></li>
  </ul></li>
  <li><a href="#circuit-analysis" id="toc-circuit-analysis" class="nav-link" data-scroll-target="#circuit-analysis">5. Circuit Analysis</a>
  <ul class="collapse">
  <li><a href="#global-map-of-formula-1-circuits-and-fatal-events" id="toc-global-map-of-formula-1-circuits-and-fatal-events" class="nav-link" data-scroll-target="#global-map-of-formula-1-circuits-and-fatal-events">5.1 Global Map of Formula 1 Circuits and Fatal Events</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Formula 1 Fatal Events: Data Visualization Analysis (1950-2024)</h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">1. Introduction</h2>
<p>This document presents a comprehensive visual exploration of fatal events in Formula 1 racing from 1950 to 2024. Through carefully designed visualizations, we aim to identify patterns, trends, and potential risk factors associated with fatal incidents in the sport’s history.</p>
<p>Key questions we explore through visualization:</p>
<ul>
<li>How has the risk of fatal events changed over time?</li>
<li>Are certain drivers, nationalities, or teams associated with higher fatality rates?</li>
<li>Which circuits or regions present higher safety risks?</li>
<li>What driver factors (age, experience) correlate with fatal incidents?</li>
<li>How have safety improvements affected fatality rates over time?</li>
</ul>
</section>
<section id="temporal-trends-in-fatal-events" class="level2">
<h2 class="anchored" data-anchor-id="temporal-trends-in-fatal-events">2. Temporal Trends in Fatal Events</h2>
<section id="annual-driver-participation-and-fatal-events" class="level3">
<h3 class="anchored" data-anchor-id="annual-driver-participation-and-fatal-events">2.1 Annual Driver Participation and Fatal Events</h3>
<p>Our first visualization examines the relationship between the number of drivers participating each year and the occurrence of fatal events.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare annual driver and fatality data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>annual_driver_data <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberDrivers =</span> <span class="fu">n_distinct</span>(driver.name),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberFatalEvent =</span> <span class="fu">sum</span>(driver.fatal <span class="sc">==</span> <span class="st">'Death'</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">factor</span>(year))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the visualization</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>annual_driver_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(annual_driver_data, <span class="fu">aes</span>(<span class="at">x =</span> year)) <span class="sc">+</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Bar chart - Number of drivers</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> NumberDrivers, <span class="at">fill =</span> <span class="st">"Number of Drivers"</span>), <span class="at">stat =</span> <span class="st">'identity'</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Points - Fatal events</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> NumberFatalEvent <span class="sc">*</span> <span class="dv">5</span>, <span class="at">color =</span> <span class="st">"Fatal Events"</span>), </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> <span class="fu">filter</span>(annual_driver_data, NumberFatalEvent <span class="sc">&gt;</span> <span class="dv">0</span>), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels for fatal events</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> NumberFatalEvent <span class="sc">*</span> <span class="dv">5</span> <span class="sc">+</span> <span class="dv">5</span>, <span class="at">label =</span> NumberFatalEvent),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> <span class="fu">filter</span>(annual_driver_data, NumberFatalEvent <span class="sc">&gt;</span> <span class="dv">0</span>), </span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">vjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Annual Statistics of Drivers and Fatal Events"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"1950-2024 Formula 1 Championship"</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Drivers"</span>) <span class="sc">+</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set secondary y-axis for fatal events</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span><span class="dv">5</span>, <span class="at">name =</span> <span class="st">"Number of Fatal Events"</span>)) <span class="sc">+</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set colors</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Number of Drivers"</span> <span class="ot">=</span> <span class="st">"#3a86ff"</span>)) <span class="sc">+</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Fatal Events"</span> <span class="ot">=</span> <span class="st">"#e63946"</span>)) <span class="sc">+</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Optimize theme</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">15</span>)),</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="dv">10</span>), <span class="at">color =</span> <span class="st">"#3a86ff"</span>),</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">l =</span> <span class="dv">10</span>), <span class="at">color =</span> <span class="st">"#e63946"</span>),</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">linewidth =</span> <span class="fl">0.5</span>),</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>annual_driver_plot</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="step2_EDAViz_files/figure-html/annual-drivers-fatal-events-1.png" class="img-fluid figure-img" width="3000"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>Fatal events were more common in the early decades of Formula 1 (1950s-1970s), while becoming increasingly rare since the 1980s.</li>
<li>The number of participating drivers has generally increased over time, indicating the sport’s growth despite safety challenges.</li>
<li>Several years in the modern era have seen zero fatal events, suggesting effective safety improvements.</li>
</ul>
</section>
<section id="annual-races-and-fatal-event-occurrence" class="level3">
<h3 class="anchored" data-anchor-id="annual-races-and-fatal-event-occurrence">2.2 Annual Races and Fatal Event Occurrence</h3>
<p>This visualization examines the relationship between the number of races held each year and whether any fatal events occurred during that year.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare annual race and fatality data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>annual_race_data <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberRaces =</span> <span class="fu">n_distinct</span>(Race),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">FatalEventOccur =</span> <span class="fu">any</span>(driver.fatal <span class="sc">==</span> <span class="st">'Death'</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">factor</span>(year))</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the visualization</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>annual_race_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(annual_race_data, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> NumberRaces)) <span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add line connecting all points</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#666666"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>, <span class="at">group =</span> <span class="st">'a'</span>) <span class="sc">+</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add points with different shapes/colors based on fatal events</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> FatalEventOccur, <span class="at">color =</span> FatalEventOccur), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Annual Number of Races and Fatal Event Occurrence"</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"1950-2024 Formula 1 Championship"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Races"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Fatal Event Occurred"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">shape =</span> <span class="st">"Fatal Event Occurred"</span>) <span class="sc">+</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set custom colors for points</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"#3a86ff"</span>, <span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"#e63946"</span>),</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"Yes"</span>)) <span class="sc">+</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set custom shapes for points</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span> <span class="ot">=</span> <span class="dv">16</span>, <span class="st">"TRUE"</span> <span class="ot">=</span> <span class="dv">18</span>),</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"Yes"</span>)) <span class="sc">+</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Enhanced theme</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">15</span>)),</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="dv">10</span>)),</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">linewidth =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add gridlines for better readability</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="fu">min</span>(annual_race_data<span class="sc">$</span>NumberRaces), <span class="fu">max</span>(annual_race_data<span class="sc">$</span>NumberRaces), <span class="at">by =</span> <span class="dv">2</span>), </span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">color =</span> <span class="st">"#bbbbbb"</span>, <span class="at">linewidth =</span> <span class="fl">0.3</span>)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>annual_race_plot</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="step2_EDAViz_files/figure-html/annual-races-fatal-occurrence-1.png" class="img-fluid figure-img" width="3000"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>The number of races per season has increased significantly over time, especially since the 2000s.</li>
<li>There appears to be an inverse relationship between calendar expansion (more races) and fatal event occurrence.</li>
<li>Recent decades have seen consistently improved safety despite the increased number of race events.</li>
</ul>
</section>
</section>
<section id="constructorteam-analysis" class="level2">
<h2 class="anchored" data-anchor-id="constructorteam-analysis">3. Constructor/Team Analysis</h2>
<section id="distribution-of-fatal-events-by-constructor" class="level3">
<h3 class="anchored" data-anchor-id="distribution-of-fatal-events-by-constructor">3.1 Distribution of Fatal Events by Constructor</h3>
<p>This pie chart visualizes how fatal events have been distributed across different constructors (teams).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare constructor fatality data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>constructor_fatal_data <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(driver.fatal <span class="sc">==</span> <span class="st">'Death'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(constructor.name) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">NumberFatalDrivers =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(NumberFatalDrivers))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create interactive pie chart</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>constructor_pie_chart <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> constructor_fatal_data, </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="sc">~</span>constructor.name, </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="sc">~</span>NumberFatalDrivers, </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'pie'</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">textinfo =</span> <span class="st">'label+percent'</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">hoverinfo =</span> <span class="st">'text'</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(constructor.name, <span class="st">": "</span>, NumberFatalDrivers, <span class="st">" fatal drivers"</span>),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">marker =</span> <span class="fu">list</span>(</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">colors =</span> <span class="fu">colorRampPalette</span>(<span class="fu">c</span>(<span class="st">"#3a86ff"</span>, <span class="st">"#e63946"</span>))(<span class="fu">nrow</span>(constructor_fatal_data)),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">'#FFFFFF'</span>, <span class="at">width =</span> <span class="dv">1</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        )) <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">list</span>(</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">text =</span> <span class="st">"Distribution of Fatal Drivers by Constructor"</span>,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">family =</span> <span class="st">"Arial"</span>, <span class="at">color =</span> <span class="st">"#333333"</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">showlegend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">margin =</span> <span class="fu">list</span>(<span class="at">l =</span> <span class="dv">20</span>, <span class="at">r =</span> <span class="dv">20</span>, <span class="at">t =</span> <span class="dv">50</span>, <span class="at">b =</span> <span class="dv">20</span>),</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">paper_bgcolor =</span> <span class="st">'#FAFAFA'</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">config</span>(<span class="at">displayModeBar =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>constructor_pie_chart</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-78e58b4656f6a905d1f9" style="width:100%;height:390px;"></div>
<script type="application/json" data-for="htmlwidget-78e58b4656f6a905d1f9">{"x":{"visdat":{"3698484028d0":["function () ","plotlyVisDat"]},"cur_data":"3698484028d0","attrs":{"3698484028d0":{"labels":{},"values":{},"textinfo":"label+percent","hoverinfo":"text","text":{},"marker":{"colors":["#3A86FF","#4481F3","#4F7CE7","#5A77DC","#6572D0","#6F6DC5","#7A69B9","#8564AE","#905FA2","#9A5A96","#A5558B","#B0517F","#BB4C74","#C54768","#D0425D","#DB3D51","#E63946"],"line":{"color":"#FFFFFF","width":1}},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"}},"layout":{"margin":{"b":20,"l":20,"t":50,"r":20},"title":{"text":"Distribution of Fatal Drivers by Constructor","font":{"size":16,"family":"Arial","color":"#333333"}},"showlegend":false,"paper_bgcolor":"#FAFAFA","hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"labels":["Ferrari","Team Lotus","Kurtis Kraft","March","Brabham-BRM","Cooper-Climax","De Tomaso","Honda","Marussia","Maserati","Osella","Shadow","Simtek","Surtees","Tyrrell","Vanwall","Williams"],"values":[5,3,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1],"textinfo":"label+percent","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["Ferrari :  5  fatal drivers","Team Lotus :  3  fatal drivers","Kurtis Kraft :  2  fatal drivers","March :  2  fatal drivers","Brabham-BRM :  1  fatal drivers","Cooper-Climax :  1  fatal drivers","De Tomaso :  1  fatal drivers","Honda :  1  fatal drivers","Marussia :  1  fatal drivers","Maserati :  1  fatal drivers","Osella :  1  fatal drivers","Shadow :  1  fatal drivers","Simtek :  1  fatal drivers","Surtees :  1  fatal drivers","Tyrrell :  1  fatal drivers","Vanwall :  1  fatal drivers","Williams :  1  fatal drivers"],"marker":{"color":"rgba(31,119,180,1)","colors":["#3A86FF","#4481F3","#4F7CE7","#5A77DC","#6572D0","#6F6DC5","#7A69B9","#8564AE","#905FA2","#9A5A96","#A5558B","#B0517F","#BB4C74","#C54768","#D0425D","#DB3D51","#E63946"],"line":{"color":"#FFFFFF","width":1}},"type":"pie","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>Fatal events are not evenly distributed across constructors, with several historic teams accounting for a disproportionate number of incidents.</li>
<li>Ferrari, with the longest history in F1, has unfortunately experienced the most fatal events.</li>
<li>Many modern teams have zero fatal incidents, highlighting safety improvements across the sport.</li>
</ul>
</section>
</section>
<section id="driver-nationality-analysis" class="level2">
<h2 class="anchored" data-anchor-id="driver-nationality-analysis">4. Driver Nationality Analysis</h2>
<section id="driver-nationalities-and-fatality-rates" class="level3">
<h3 class="anchored" data-anchor-id="driver-nationalities-and-fatality-rates">4.1 Driver Nationalities and Fatality Rates</h3>
<p>This visualization uses an interactive sunburst chart to show the hierarchical relationship between driver nationalities, grouped by continents, and their associated fatality rates.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare nationality data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>nationality_data <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(driver.nationality) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberDrivers =</span> <span class="fu">n_distinct</span>(driver.name),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberFatalEvent =</span> <span class="fu">sum</span>(driver.fatal <span class="sc">==</span> <span class="st">'Death'</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add continent grouping and calculate fatality rate</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>nationality_data <span class="ot">&lt;-</span> nationality_data <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">continent =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      driver.nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Italian"</span>, <span class="st">"British"</span>, <span class="st">"French"</span>, <span class="st">"Belgian"</span>, <span class="st">"Swiss"</span>, <span class="st">"Monegasque"</span>, </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"German"</span>, <span class="st">"Spanish"</span>, <span class="st">"Dutch"</span>, <span class="st">"Swedish"</span>, <span class="st">"Portuguese"</span>, </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Austrian"</span>, <span class="st">"Liechtensteiner"</span>, <span class="st">"Danish"</span>, <span class="st">"Finnish"</span>, </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Czech"</span>, <span class="st">"Hungarian"</span>, <span class="st">"Polish"</span>, <span class="st">"Russian"</span>) <span class="sc">~</span> <span class="st">"Europe"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>      driver.nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Argentine"</span>, <span class="st">"Brazilian"</span>, <span class="st">"Uruguayan"</span>, <span class="st">"Venezuelan"</span>, </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Mexican"</span>, <span class="st">"Canadian"</span>, <span class="st">"Chilean"</span>, <span class="st">"Colombian"</span>, <span class="st">"Argentinian"</span>) <span class="sc">~</span> <span class="st">"Americas"</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>      driver.nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Thai"</span>, <span class="st">"Japanese"</span>, <span class="st">"Malaysian"</span>, <span class="st">"Indian"</span>, <span class="st">"Indonesian"</span>, </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Chinese"</span>) <span class="sc">~</span> <span class="st">"Asia"</span>,</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>      driver.nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"South African"</span>, <span class="st">"Rhodesian"</span>) <span class="sc">~</span> <span class="st">"Africa"</span>,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>      driver.nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Australian"</span>, <span class="st">"New Zealander"</span>) <span class="sc">~</span> <span class="st">"Oceania"</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>      driver.nationality <span class="sc">==</span> <span class="st">"American"</span> <span class="sc">~</span> <span class="st">"North America"</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>      driver.nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"American-Italian"</span>, <span class="st">"Argentine-Italian"</span>) <span class="sc">~</span> <span class="st">"Mixed"</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatality_rate =</span> <span class="fu">ifelse</span>(NumberDrivers <span class="sc">&gt;</span> <span class="dv">0</span>, NumberFatalEvent <span class="sc">/</span> NumberDrivers <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">0</span>),</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_text =</span> <span class="fu">paste0</span>(driver.nationality, </span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"&lt;br&gt;Drivers: "</span>, NumberDrivers, </span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"&lt;br&gt;Fatal events: "</span>, NumberFatalEvent,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"&lt;br&gt;Fatality rate: "</span>, <span class="fu">round</span>(fatality_rate, <span class="dv">1</span>), <span class="st">"%"</span>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Create continent summaries for the inner ring</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>continent_data <span class="ot">&lt;-</span> nationality_data <span class="sc">%&gt;%</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberDrivers =</span> <span class="fu">sum</span>(NumberDrivers),</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberFatalEvent =</span> <span class="fu">sum</span>(NumberFatalEvent),</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatality_rate =</span> <span class="fu">sum</span>(NumberFatalEvent) <span class="sc">/</span> <span class="fu">sum</span>(NumberDrivers) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_text =</span> <span class="fu">paste0</span>(continent, </span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"&lt;br&gt;Total drivers: "</span>, NumberDrivers, </span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"&lt;br&gt;Total fatal events: "</span>, NumberFatalEvent,</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"&lt;br&gt;Fatality rate: "</span>, <span class="fu">round</span>(fatality_rate, <span class="dv">1</span>), <span class="st">"%"</span>)</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for the sunburst chart</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(continent_data<span class="sc">$</span>continent, nationality_data<span class="sc">$</span>driver.nationality)</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>parents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">""</span>, <span class="fu">nrow</span>(continent_data)), nationality_data<span class="sc">$</span>continent)</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">c</span>(continent_data<span class="sc">$</span>NumberDrivers, nationality_data<span class="sc">$</span>NumberDrivers)</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>hover_text <span class="ot">&lt;-</span> <span class="fu">c</span>(continent_data<span class="sc">$</span>label_text, nationality_data<span class="sc">$</span>label_text)</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Create color scale based on fatality rate</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>fatality_rates <span class="ot">&lt;-</span> <span class="fu">c</span>(continent_data<span class="sc">$</span>fatality_rate, nationality_data<span class="sc">$</span>fatality_rate)</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">sapply</span>(fatality_rates, <span class="cf">function</span>(rate) {</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (rate <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(<span class="st">"#3a86ff"</span>)          <span class="co"># Blue for zero fatality</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span> (rate <span class="sc">&lt;=</span> <span class="dv">3</span>) <span class="fu">return</span>(<span class="st">"#8ecae6"</span>)      <span class="co"># Light blue for low fatality</span></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span> (rate <span class="sc">&lt;=</span> <span class="dv">6</span>) <span class="fu">return</span>(<span class="st">"#ffb703"</span>)      <span class="co"># Yellow for medium fatality</span></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">return</span>(<span class="st">"#e63946"</span>)                     <span class="co"># Red for high fatality</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the sunburst chart</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>nationality_sunburst <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> labels,</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>  <span class="at">parents =</span> parents,</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">values =</span> values,</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"sunburst"</span>,</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">branchvalues =</span> <span class="st">"total"</span>,</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">hovertext =</span> hover_text,</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">hoverinfo =</span> <span class="st">"text"</span>,</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> <span class="fu">list</span>(</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors =</span> colors,</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#ffffff"</span>, <span class="at">width =</span> <span class="dv">1</span>)</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>  <span class="at">textinfo =</span> <span class="st">"label"</span>,</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">insidetextorientation =</span> <span class="st">"radial"</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">layout</span>(</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="fu">list</span>(</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="st">"F1 Drivers by Nationality and Fatality Rate"</span>,</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">family =</span> <span class="st">"Arial"</span>, <span class="at">color =</span> <span class="st">"#333333"</span>)</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">margin =</span> <span class="fu">list</span>(<span class="at">l =</span> <span class="dv">20</span>, <span class="at">r =</span> <span class="dv">20</span>, <span class="at">t =</span> <span class="dv">50</span>, <span class="at">b =</span> <span class="dv">20</span>)</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>nationality_sunburst</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b3cdf51e049f709c375d" style="width:100%;height:390px;"></div>
<script type="application/json" data-for="htmlwidget-b3cdf51e049f709c375d">{"x":{"visdat":{"3698720b7cb8":["function () ","plotlyVisDat"]},"cur_data":"3698720b7cb8","attrs":{"3698720b7cb8":{"labels":["Africa","Americas","Asia","Europe","Mixed","North America","Oceania","Other","American","American-Italian","Argentine","Argentine-Italian","Argentinian","Australian","Austrian","Belgian","Brazilian","British","Canadian","Chilean","Chinese","Colombian","Czech","Danish","Dutch","East German","Finnish","French","German","Hungarian","Indian","Indonesian","Irish","Italian","Japanese","Liechtensteiner","Malaysian","Mexican","Monegasque","New Zealander","Polish","Portuguese","Rhodesian","Russian","South African","Spanish","Swedish","Swiss","Thai","Uruguayan","Venezuelan"],"parents":["","","","","","","","","North America","Mixed","Americas","Mixed","Americas","Oceania","Europe","Europe","Americas","Europe","Americas","Americas","Asia","Americas","Europe","Europe","Europe","Other","Europe","Europe","Europe","Europe","Asia","Asia","Other","Europe","Asia","Europe","Asia","Americas","Europe","Oceania","Europe","Europe","Africa","Europe","Africa","Europe","Europe","Europe","Asia","Americas","Americas"],"values":[27,88,27,522,2,158,29,8,158,1,24,1,1,19,15,23,32,166,14,1,1,3,1,5,18,3,9,73,50,1,2,1,5,99,20,1,1,6,4,10,1,4,4,4,23,15,10,23,2,4,3],"branchvalues":"total","hovertext":["Africa<br>Total drivers: 27<br>Total fatal events: 0<br>Fatality rate: 0%","Americas<br>Total drivers: 88<br>Total fatal events: 3<br>Fatality rate: 3.4%","Asia<br>Total drivers: 27<br>Total fatal events: 0<br>Fatality rate: 0%","Europe<br>Total drivers: 522<br>Total fatal events: 19<br>Fatality rate: 3.6%","Mixed<br>Total drivers: 2<br>Total fatal events: 0<br>Fatality rate: 0%","North America<br>Total drivers: 158<br>Total fatal events: 3<br>Fatality rate: 1.9%","Oceania<br>Total drivers: 29<br>Total fatal events: 0<br>Fatality rate: 0%","Other<br>Total drivers: 8<br>Total fatal events: 0<br>Fatality rate: 0%","American<br>Drivers: 158<br>Fatal events: 3<br>Fatality rate: 1.9%","American-Italian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Argentine<br>Drivers: 24<br>Fatal events: 1<br>Fatality rate: 4.2%","Argentine-Italian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Argentinian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Australian<br>Drivers: 19<br>Fatal events: 0<br>Fatality rate: 0%","Austrian<br>Drivers: 15<br>Fatal events: 3<br>Fatality rate: 20%","Belgian<br>Drivers: 23<br>Fatal events: 0<br>Fatality rate: 0%","Brazilian<br>Drivers: 32<br>Fatal events: 1<br>Fatality rate: 3.1%","British<br>Drivers: 166<br>Fatal events: 8<br>Fatality rate: 4.8%","Canadian<br>Drivers: 14<br>Fatal events: 1<br>Fatality rate: 7.1%","Chilean<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Chinese<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Colombian<br>Drivers: 3<br>Fatal events: 0<br>Fatality rate: 0%","Czech<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Danish<br>Drivers: 5<br>Fatal events: 0<br>Fatality rate: 0%","Dutch<br>Drivers: 18<br>Fatal events: 0<br>Fatality rate: 0%","East German<br>Drivers: 3<br>Fatal events: 0<br>Fatality rate: 0%","Finnish<br>Drivers: 9<br>Fatal events: 0<br>Fatality rate: 0%","French<br>Drivers: 73<br>Fatal events: 3<br>Fatality rate: 4.1%","German<br>Drivers: 50<br>Fatal events: 1<br>Fatality rate: 2%","Hungarian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Indian<br>Drivers: 2<br>Fatal events: 0<br>Fatality rate: 0%","Indonesian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Irish<br>Drivers: 5<br>Fatal events: 0<br>Fatality rate: 0%","Italian<br>Drivers: 99<br>Fatal events: 3<br>Fatality rate: 3%","Japanese<br>Drivers: 20<br>Fatal events: 0<br>Fatality rate: 0%","Liechtensteiner<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Malaysian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Mexican<br>Drivers: 6<br>Fatal events: 0<br>Fatality rate: 0%","Monegasque<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","New Zealander<br>Drivers: 10<br>Fatal events: 0<br>Fatality rate: 0%","Polish<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Portuguese<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","Rhodesian<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","Russian<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","South African<br>Drivers: 23<br>Fatal events: 0<br>Fatality rate: 0%","Spanish<br>Drivers: 15<br>Fatal events: 0<br>Fatality rate: 0%","Swedish<br>Drivers: 10<br>Fatal events: 1<br>Fatality rate: 10%","Swiss<br>Drivers: 23<br>Fatal events: 0<br>Fatality rate: 0%","Thai<br>Drivers: 2<br>Fatal events: 0<br>Fatality rate: 0%","Uruguayan<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","Venezuelan<br>Drivers: 3<br>Fatal events: 0<br>Fatality rate: 0%"],"hoverinfo":"text","marker":{"colors":["#3a86ff","#ffb703","#3a86ff","#ffb703","#3a86ff","#8ecae6","#3a86ff","#3a86ff","#8ecae6","#3a86ff","#ffb703","#3a86ff","#3a86ff","#3a86ff","#e63946","#3a86ff","#ffb703","#ffb703","#e63946","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#ffb703","#8ecae6","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#ffb703","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#e63946","#3a86ff","#3a86ff","#3a86ff","#3a86ff"],"line":{"color":"#ffffff","width":1}},"textinfo":"label","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":20,"l":20,"t":50,"r":20},"title":{"text":"F1 Drivers by Nationality and Fatality Rate","font":{"size":16,"family":"Arial","color":"#333333"}},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["Africa","Americas","Asia","Europe","Mixed","North America","Oceania","Other","American","American-Italian","Argentine","Argentine-Italian","Argentinian","Australian","Austrian","Belgian","Brazilian","British","Canadian","Chilean","Chinese","Colombian","Czech","Danish","Dutch","East German","Finnish","French","German","Hungarian","Indian","Indonesian","Irish","Italian","Japanese","Liechtensteiner","Malaysian","Mexican","Monegasque","New Zealander","Polish","Portuguese","Rhodesian","Russian","South African","Spanish","Swedish","Swiss","Thai","Uruguayan","Venezuelan"],"parents":["","","","","","","","","North America","Mixed","Americas","Mixed","Americas","Oceania","Europe","Europe","Americas","Europe","Americas","Americas","Asia","Americas","Europe","Europe","Europe","Other","Europe","Europe","Europe","Europe","Asia","Asia","Other","Europe","Asia","Europe","Asia","Americas","Europe","Oceania","Europe","Europe","Africa","Europe","Africa","Europe","Europe","Europe","Asia","Americas","Americas"],"values":[27,88,27,522,2,158,29,8,158,1,24,1,1,19,15,23,32,166,14,1,1,3,1,5,18,3,9,73,50,1,2,1,5,99,20,1,1,6,4,10,1,4,4,4,23,15,10,23,2,4,3],"branchvalues":"total","hovertext":["Africa<br>Total drivers: 27<br>Total fatal events: 0<br>Fatality rate: 0%","Americas<br>Total drivers: 88<br>Total fatal events: 3<br>Fatality rate: 3.4%","Asia<br>Total drivers: 27<br>Total fatal events: 0<br>Fatality rate: 0%","Europe<br>Total drivers: 522<br>Total fatal events: 19<br>Fatality rate: 3.6%","Mixed<br>Total drivers: 2<br>Total fatal events: 0<br>Fatality rate: 0%","North America<br>Total drivers: 158<br>Total fatal events: 3<br>Fatality rate: 1.9%","Oceania<br>Total drivers: 29<br>Total fatal events: 0<br>Fatality rate: 0%","Other<br>Total drivers: 8<br>Total fatal events: 0<br>Fatality rate: 0%","American<br>Drivers: 158<br>Fatal events: 3<br>Fatality rate: 1.9%","American-Italian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Argentine<br>Drivers: 24<br>Fatal events: 1<br>Fatality rate: 4.2%","Argentine-Italian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Argentinian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Australian<br>Drivers: 19<br>Fatal events: 0<br>Fatality rate: 0%","Austrian<br>Drivers: 15<br>Fatal events: 3<br>Fatality rate: 20%","Belgian<br>Drivers: 23<br>Fatal events: 0<br>Fatality rate: 0%","Brazilian<br>Drivers: 32<br>Fatal events: 1<br>Fatality rate: 3.1%","British<br>Drivers: 166<br>Fatal events: 8<br>Fatality rate: 4.8%","Canadian<br>Drivers: 14<br>Fatal events: 1<br>Fatality rate: 7.1%","Chilean<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Chinese<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Colombian<br>Drivers: 3<br>Fatal events: 0<br>Fatality rate: 0%","Czech<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Danish<br>Drivers: 5<br>Fatal events: 0<br>Fatality rate: 0%","Dutch<br>Drivers: 18<br>Fatal events: 0<br>Fatality rate: 0%","East German<br>Drivers: 3<br>Fatal events: 0<br>Fatality rate: 0%","Finnish<br>Drivers: 9<br>Fatal events: 0<br>Fatality rate: 0%","French<br>Drivers: 73<br>Fatal events: 3<br>Fatality rate: 4.1%","German<br>Drivers: 50<br>Fatal events: 1<br>Fatality rate: 2%","Hungarian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Indian<br>Drivers: 2<br>Fatal events: 0<br>Fatality rate: 0%","Indonesian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Irish<br>Drivers: 5<br>Fatal events: 0<br>Fatality rate: 0%","Italian<br>Drivers: 99<br>Fatal events: 3<br>Fatality rate: 3%","Japanese<br>Drivers: 20<br>Fatal events: 0<br>Fatality rate: 0%","Liechtensteiner<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Malaysian<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Mexican<br>Drivers: 6<br>Fatal events: 0<br>Fatality rate: 0%","Monegasque<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","New Zealander<br>Drivers: 10<br>Fatal events: 0<br>Fatality rate: 0%","Polish<br>Drivers: 1<br>Fatal events: 0<br>Fatality rate: 0%","Portuguese<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","Rhodesian<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","Russian<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","South African<br>Drivers: 23<br>Fatal events: 0<br>Fatality rate: 0%","Spanish<br>Drivers: 15<br>Fatal events: 0<br>Fatality rate: 0%","Swedish<br>Drivers: 10<br>Fatal events: 1<br>Fatality rate: 10%","Swiss<br>Drivers: 23<br>Fatal events: 0<br>Fatality rate: 0%","Thai<br>Drivers: 2<br>Fatal events: 0<br>Fatality rate: 0%","Uruguayan<br>Drivers: 4<br>Fatal events: 0<br>Fatality rate: 0%","Venezuelan<br>Drivers: 3<br>Fatal events: 0<br>Fatality rate: 0%"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"marker":{"color":"rgba(31,119,180,1)","colors":["#3a86ff","#ffb703","#3a86ff","#ffb703","#3a86ff","#8ecae6","#3a86ff","#3a86ff","#8ecae6","#3a86ff","#ffb703","#3a86ff","#3a86ff","#3a86ff","#e63946","#3a86ff","#ffb703","#ffb703","#e63946","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#ffb703","#8ecae6","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#ffb703","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#3a86ff","#e63946","#3a86ff","#3a86ff","#3a86ff","#3a86ff"],"line":{"color":"#ffffff","width":1}},"textinfo":"label","insidetextorientation":"radial","type":"sunburst","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>European nations, particularly British and Italian drivers, have had the largest representation in F1 with varying fatality rates.</li>
<li>Continental differences exist, with some regions showing consistently lower risk profiles than others.</li>
<li>Nations with fewer total drivers often show more extreme fatality rates due to small sample sizes.</li>
</ul>
</section>
<section id="nationality-data-table" class="level3">
<h3 class="anchored" data-anchor-id="nationality-data-table">4.2 Nationality Data Table</h3>
<p>This table provides detailed statistics on driver nationalities and their associated fatality events.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare nationality table data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>nationality_table_data <span class="ot">&lt;-</span> nationality_data <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(driver.nationality, NumberDrivers, NumberFatalEvent) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add fatality rate indicator</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">FatalityRate =</span> <span class="fu">ifelse</span>(NumberDrivers <span class="sc">&gt;</span> <span class="dv">0</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">round</span>(NumberFatalEvent<span class="sc">/</span>NumberDrivers<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>), <span class="dv">0</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort by number of drivers in descending order</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(NumberDrivers))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create table</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>nationality_table <span class="ot">&lt;-</span> nationality_table_data <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set column labels</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">driver.nationality =</span> <span class="st">"Nationality"</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberDrivers =</span> <span class="st">"Number of Drivers"</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberFatalEvent =</span> <span class="st">"Fatal Events"</span>,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">FatalityRate =</span> <span class="st">"Fatality Rate (%)"</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set table title and subtitle</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Formula 1 Driver Nationalities and Fatalities**"</span>),</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Historical data on drivers and fatal events by nationality"</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Format number columns</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> NumberDrivers,</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> NumberFatalEvent,</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> FatalityRate,</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">2</span>,</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale_values =</span> <span class="cn">FALSE</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Conditional formatting - highlight fatality rates</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_color</span>(</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> FatalityRate,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">col_numeric</span>(</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#3a86ff"</span>, <span class="st">"#8ecae6"</span>, <span class="st">"#ffb703"</span>, <span class="st">"#e63946"</span>),</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">domain =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set table style</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Footnote</span></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">"*Fatality Rate = (Fatal Events / Number of Drivers) × 100*"</span>)</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set table theme</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.background.color =</span> <span class="st">"#f0f0f0"</span>,</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.background.color =</span> <span class="st">"#e0e0e0"</span>,</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.border.top.style =</span> <span class="st">"hidden"</span>,</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.border.bottom.style =</span> <span class="st">"hidden"</span>,</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.border.top.style =</span> <span class="st">"solid"</span>,</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.border.top.width =</span> <span class="fu">px</span>(<span class="dv">2</span>),</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.border.top.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">table_body.hlines.color =</span> <span class="st">"#f0f0f0"</span>,</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">table_body.border.bottom.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">footnotes.border.bottom.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_notes.border.bottom.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">footnotes.padding =</span> <span class="fu">px</span>(<span class="dv">5</span>),</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_notes.padding =</span> <span class="fu">px</span>(<span class="dv">5</span>)</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the table</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>nationality_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="yrdsmcodqr" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#yrdsmcodqr table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#yrdsmcodqr thead, #yrdsmcodqr tbody, #yrdsmcodqr tfoot, #yrdsmcodqr tr, #yrdsmcodqr td, #yrdsmcodqr th {
  border-style: none;
}

#yrdsmcodqr p {
  margin: 0;
  padding: 0;
}

#yrdsmcodqr .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: hidden;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: hidden;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yrdsmcodqr .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#yrdsmcodqr .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#yrdsmcodqr .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#yrdsmcodqr .gt_heading {
  background-color: #F0F0F0;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yrdsmcodqr .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yrdsmcodqr .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #404040;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yrdsmcodqr .gt_col_heading {
  color: #333333;
  background-color: #E0E0E0;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yrdsmcodqr .gt_column_spanner_outer {
  color: #333333;
  background-color: #E0E0E0;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yrdsmcodqr .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yrdsmcodqr .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yrdsmcodqr .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yrdsmcodqr .gt_spanner_row {
  border-bottom-style: hidden;
}

#yrdsmcodqr .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#yrdsmcodqr .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yrdsmcodqr .gt_from_md > :first-child {
  margin-top: 0;
}

#yrdsmcodqr .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yrdsmcodqr .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #F0F0F0;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yrdsmcodqr .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#yrdsmcodqr .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#yrdsmcodqr .gt_row_group_first td {
  border-top-width: 2px;
}

#yrdsmcodqr .gt_row_group_first th {
  border-top-width: 2px;
}

#yrdsmcodqr .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yrdsmcodqr .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#yrdsmcodqr .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#yrdsmcodqr .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yrdsmcodqr .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yrdsmcodqr .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yrdsmcodqr .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#yrdsmcodqr .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yrdsmcodqr .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #404040;
}

#yrdsmcodqr .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #404040;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yrdsmcodqr .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#yrdsmcodqr .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #404040;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yrdsmcodqr .gt_sourcenote {
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#yrdsmcodqr .gt_left {
  text-align: left;
}

#yrdsmcodqr .gt_center {
  text-align: center;
}

#yrdsmcodqr .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yrdsmcodqr .gt_font_normal {
  font-weight: normal;
}

#yrdsmcodqr .gt_font_bold {
  font-weight: bold;
}

#yrdsmcodqr .gt_font_italic {
  font-style: italic;
}

#yrdsmcodqr .gt_super {
  font-size: 65%;
}

#yrdsmcodqr .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#yrdsmcodqr .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#yrdsmcodqr .gt_indent_1 {
  text-indent: 5px;
}

#yrdsmcodqr .gt_indent_2 {
  text-indent: 10px;
}

#yrdsmcodqr .gt_indent_3 {
  text-indent: 15px;
}

#yrdsmcodqr .gt_indent_4 {
  text-indent: 20px;
}

#yrdsmcodqr .gt_indent_5 {
  text-indent: 25px;
}

#yrdsmcodqr .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#yrdsmcodqr div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="4" class="gt_heading gt_title gt_font_normal"><strong>Formula 1 Driver Nationalities and Fatalities</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Historical data on drivers and fatal events by nationality</td>
</tr>
<tr class="gt_col_headings header">
<th id="driver.nationality" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Nationality</th>
<th id="NumberDrivers" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Number of Drivers</th>
<th id="NumberFatalEvent" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Fatal Events</th>
<th id="FatalityRate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Fatality Rate (%)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">British</td>
<td class="gt_row gt_right" headers="NumberDrivers">166</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">8</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #7FB7ED; color: #000000">4.82%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">American</td>
<td class="gt_row gt_right" headers="NumberDrivers">158</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">3</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #5D99F8; color: #FFFFFF">1.90%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Italian</td>
<td class="gt_row gt_right" headers="NumberDrivers">99</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">3</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #6CA4F4; color: #FFFFFF">3.03%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">French</td>
<td class="gt_row gt_right" headers="NumberDrivers">73</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">3</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #78AFF0; color: #000000">4.11%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">German</td>
<td class="gt_row gt_right" headers="NumberDrivers">50</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">1</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #5F9AF8; color: #FFFFFF">2.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Brazilian</td>
<td class="gt_row gt_right" headers="NumberDrivers">32</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">1</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #6DA5F4; color: #000000">3.12%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Argentine</td>
<td class="gt_row gt_right" headers="NumberDrivers">24</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">1</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #78B0F0; color: #000000">4.17%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Belgian</td>
<td class="gt_row gt_right" headers="NumberDrivers">23</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">South African</td>
<td class="gt_row gt_right" headers="NumberDrivers">23</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Swiss</td>
<td class="gt_row gt_right" headers="NumberDrivers">23</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Japanese</td>
<td class="gt_row gt_right" headers="NumberDrivers">20</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Australian</td>
<td class="gt_row gt_right" headers="NumberDrivers">19</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Dutch</td>
<td class="gt_row gt_right" headers="NumberDrivers">18</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Austrian</td>
<td class="gt_row gt_right" headers="NumberDrivers">15</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">3</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #E63946; color: #FFFFFF">20.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Spanish</td>
<td class="gt_row gt_right" headers="NumberDrivers">15</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Canadian</td>
<td class="gt_row gt_right" headers="NumberDrivers">14</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">1</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #9EC9D9; color: #000000">7.14%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">New Zealander</td>
<td class="gt_row gt_right" headers="NumberDrivers">10</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Swedish</td>
<td class="gt_row gt_right" headers="NumberDrivers">10</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">1</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #D9C08A; color: #000000">10.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Finnish</td>
<td class="gt_row gt_right" headers="NumberDrivers">9</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Mexican</td>
<td class="gt_row gt_right" headers="NumberDrivers">6</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Danish</td>
<td class="gt_row gt_right" headers="NumberDrivers">5</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Irish</td>
<td class="gt_row gt_right" headers="NumberDrivers">5</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Monegasque</td>
<td class="gt_row gt_right" headers="NumberDrivers">4</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Portuguese</td>
<td class="gt_row gt_right" headers="NumberDrivers">4</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Rhodesian</td>
<td class="gt_row gt_right" headers="NumberDrivers">4</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Russian</td>
<td class="gt_row gt_right" headers="NumberDrivers">4</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Uruguayan</td>
<td class="gt_row gt_right" headers="NumberDrivers">4</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Colombian</td>
<td class="gt_row gt_right" headers="NumberDrivers">3</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">East German</td>
<td class="gt_row gt_right" headers="NumberDrivers">3</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Venezuelan</td>
<td class="gt_row gt_right" headers="NumberDrivers">3</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Indian</td>
<td class="gt_row gt_right" headers="NumberDrivers">2</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Thai</td>
<td class="gt_row gt_right" headers="NumberDrivers">2</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">American-Italian</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Argentine-Italian</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Argentinian</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Chilean</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Chinese</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Czech</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Hungarian</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Indonesian</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Liechtensteiner</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="driver.nationality">Malaysian</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="driver.nationality">Polish</td>
<td class="gt_row gt_right" headers="NumberDrivers">1</td>
<td class="gt_row gt_right" headers="NumberFatalEvent">0</td>
<td class="gt_row gt_right" headers="FatalityRate" style="background-color: #3A86FF; color: #FFFFFF">0.00%</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="odd">
<td colspan="4" class="gt_sourcenote"><em>Fatality Rate = (Fatal Events / Number of Drivers) × 100</em></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>British drivers form the largest national group in F1 history, followed by Italian and American drivers.</li>
<li>Several nationalities have never experienced a fatal incident, while others have disproportionately high fatality rates.</li>
<li>The color-coding highlights risk patterns across different driver nationalities, making it easy to identify high-risk groups.</li>
</ul>
</section>
</section>
<section id="circuit-analysis" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="circuit-analysis">5. Circuit Analysis</h2>
<section id="global-map-of-formula-1-circuits-and-fatal-events" class="level3 page-columns page-full">
<h3 class="anchored">5.1 Global Map of Formula 1 Circuits and Fatal Events</h3>
<p>This map visualization shows the geographic distribution of Formula 1 circuits around the world, highlighting their safety records.</p>
<div class="column-page">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare circuit data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>circuit_data <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(circuit.name, lng, lat) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberofRace =</span> <span class="fu">n_distinct</span>(Race),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumberFatalEvent =</span> <span class="fu">sum</span>(driver.fatal <span class="sc">==</span> <span class="st">'Death'</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for visualization</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>circuit_data <span class="ot">&lt;-</span> circuit_data <span class="sc">%&gt;%</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate fatality ratio</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">FatalityRatio =</span> <span class="fu">ifelse</span>(NumberofRace <span class="sc">&gt;</span> <span class="dv">0</span>, NumberFatalEvent<span class="sc">/</span>NumberofRace, <span class="dv">0</span>),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Categorize circuits for labeling</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">ImportanceScore =</span> (NumberofRace<span class="sc">/</span><span class="dv">10</span>) <span class="sc">+</span> (NumberFatalEvent<span class="sc">*</span><span class="dv">5</span>),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Determine which circuits to label</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">LabelCircuit =</span> ImportanceScore <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">|</span> NumberFatalEvent <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Get world map data</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>world_map <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"world"</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the visualization</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>world_circuit_map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add world map background</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world_map, </span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group),</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> <span class="st">"#f8f8f8"</span>, <span class="at">color =</span> <span class="st">"#e0e0e0"</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add circuit points</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> circuit_data,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> lng, <span class="at">y =</span> lat, </span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> NumberofRace,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="fu">factor</span>(NumberFatalEvent),</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.9</span>),</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">stroke =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels for important circuits</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="at">data =</span> <span class="fu">filter</span>(circuit_data, LabelCircuit),</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> lng, <span class="at">y =</span> lat, <span class="at">label =</span> circuit.name),</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>                <span class="at">box.padding =</span> <span class="fl">0.5</span>, </span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>                <span class="at">point.padding =</span> <span class="fl">0.5</span>,</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>                <span class="at">min.segment.length =</span> <span class="dv">0</span>,</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>                <span class="at">max.overlaps =</span> <span class="dv">15</span>,</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>                <span class="at">segment.color =</span> <span class="st">"gray50"</span>,</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>                <span class="at">force =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Custom fill scale for fatal events</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Fatal Events"</span>,</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"0"</span> <span class="ot">=</span> <span class="st">"#3a86ff"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"#ffb703"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"#fb8500"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"#e63946"</span>),</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"None"</span>, <span class="st">"One"</span>, <span class="st">"Two"</span>, <span class="st">"Three"</span>)</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Custom size scale</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Number of Races"</span>,</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="dv">10</span>),</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">75</span>)</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Hide alpha from legend</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add titles and captions</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Formula 1 Circuits Around the World"</span>,</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Size indicates number of races; color indicates fatal events"</span>,</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data source: Formula 1 historical records (1950-2024)"</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adjust theme</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>)),</span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"#e5e5e5"</span>, <span class="at">size =</span> <span class="fl">0.2</span>),</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box =</span> <span class="st">"vertical"</span>,</span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set appropriate map projection</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>(<span class="at">ratio =</span> <span class="fl">1.3</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">150</span>, <span class="dv">150</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">60</span>, <span class="dv">80</span>))</span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the map</span></span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>world_circuit_map</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="step2_EDAViz_files/figure-html/circuit-map-1.png" class="img-fluid figure-img" width="3600"></p>
</figure>
</div>
</div>
</div>
<div class="">
<p><strong>Key Insights:</strong></p>
<ul>
<li>Formula 1 circuits are concentrated in Europe, with historic European circuits (Monza, Spa-Francorchamps, Nürburgring) having higher numbers of fatal events.</li>
<li>Newer circuits, particularly in Asia and the Middle East, have excellent safety records.</li>
<li>The size of points reveals which circuits have hosted the most races over time.</li>
</ul>
<section id="circuit-safety-records-table" class="level3">
<h3 class="anchored" data-anchor-id="circuit-safety-records-table">5.2 Circuit Safety Records Table</h3>
<p>This table provides detailed safety statistics for Formula 1 circuits.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for the table</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>circuit_table_data <span class="ot">&lt;-</span> circuit_data <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate fatality ratio</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">FatalityRatio =</span> <span class="fu">ifelse</span>(NumberofRace <span class="sc">&gt;</span> <span class="dv">0</span>, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">round</span>(NumberFatalEvent<span class="sc">/</span>NumberofRace<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>), <span class="dv">0</span>),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract approximate location from coordinates</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Location =</span> <span class="fu">paste0</span>(<span class="st">"("</span>, <span class="fu">round</span>(lat, <span class="dv">1</span>), <span class="st">"°, "</span>, <span class="fu">round</span>(lng, <span class="dv">1</span>), <span class="st">"°)"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select and rename relevant columns</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Circuit =</span> circuit.name,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    Location,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Races =</span> NumberofRace, </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Fatal Events</span><span class="st">`</span> <span class="ot">=</span> NumberFatalEvent,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Fatality Rate (%)</span><span class="st">`</span> <span class="ot">=</span> FatalityRatio</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort by number of races in descending order</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Races))</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>circuit_safety_table <span class="ot">&lt;-</span> circuit_table_data <span class="sc">%&gt;%</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set table title and subtitle</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Formula 1 Circuits and Safety Records**"</span>),</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Historical data on races and fatal events by circuit"</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Format number columns</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> Races,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="st">`</span><span class="at">Fatal Events</span><span class="st">`</span>,</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="st">`</span><span class="at">Fatality Rate (%)</span><span class="st">`</span>,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">2</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Highlight cells with fatal events</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_fill</span>(<span class="at">color =</span> <span class="st">"#ffb7032a"</span>)</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">`</span><span class="at">Fatal Events</span><span class="st">`</span>,</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span> <span class="st">`</span><span class="at">Fatal Events</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Color coding for fatality rate</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_color</span>(</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="st">`</span><span class="at">Fatality Rate (%)</span><span class="st">`</span>,</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">col_numeric</span>(</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>      <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#ffffff"</span>, <span class="st">"#ffb703"</span>, <span class="st">"#e63946"</span>),</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">domain =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Style header</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add footnote</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_footnote</span>(</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">footnote =</span> <span class="st">"Fatality Rate = (Fatal Events / Number of Races) × 100"</span>,</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="st">`</span><span class="at">Fatality Rate (%)</span><span class="st">`</span>)</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Optimize table appearance</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.background.color =</span> <span class="st">"#f0f0f0"</span>,</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.background.color =</span> <span class="st">"#e0e0e0"</span>,</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.border.top.style =</span> <span class="st">"hidden"</span>,</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.border.bottom.style =</span> <span class="st">"hidden"</span>,</span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.border.top.style =</span> <span class="st">"solid"</span>,</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.border.top.width =</span> <span class="fu">px</span>(<span class="dv">2</span>),</span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.border.top.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">table_body.hlines.color =</span> <span class="st">"#f0f0f0"</span>,</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">table_body.border.bottom.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">footnotes.border.bottom.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_notes.border.bottom.color =</span> <span class="st">"#404040"</span>,</span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">footnotes.padding =</span> <span class="fu">px</span>(<span class="dv">5</span>),</span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_notes.padding =</span> <span class="fu">px</span>(<span class="dv">5</span>)</span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the table</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>circuit_safety_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="dvczrxirtd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dvczrxirtd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dvczrxirtd thead, #dvczrxirtd tbody, #dvczrxirtd tfoot, #dvczrxirtd tr, #dvczrxirtd td, #dvczrxirtd th {
  border-style: none;
}

#dvczrxirtd p {
  margin: 0;
  padding: 0;
}

#dvczrxirtd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: hidden;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: hidden;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dvczrxirtd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dvczrxirtd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dvczrxirtd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dvczrxirtd .gt_heading {
  background-color: #F0F0F0;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dvczrxirtd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dvczrxirtd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #404040;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dvczrxirtd .gt_col_heading {
  color: #333333;
  background-color: #E0E0E0;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dvczrxirtd .gt_column_spanner_outer {
  color: #333333;
  background-color: #E0E0E0;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dvczrxirtd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dvczrxirtd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dvczrxirtd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dvczrxirtd .gt_spanner_row {
  border-bottom-style: hidden;
}

#dvczrxirtd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dvczrxirtd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dvczrxirtd .gt_from_md > :first-child {
  margin-top: 0;
}

#dvczrxirtd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dvczrxirtd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #F0F0F0;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dvczrxirtd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dvczrxirtd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dvczrxirtd .gt_row_group_first td {
  border-top-width: 2px;
}

#dvczrxirtd .gt_row_group_first th {
  border-top-width: 2px;
}

#dvczrxirtd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvczrxirtd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dvczrxirtd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dvczrxirtd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dvczrxirtd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvczrxirtd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dvczrxirtd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dvczrxirtd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dvczrxirtd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #404040;
}

#dvczrxirtd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #404040;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dvczrxirtd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvczrxirtd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #404040;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dvczrxirtd .gt_sourcenote {
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvczrxirtd .gt_left {
  text-align: left;
}

#dvczrxirtd .gt_center {
  text-align: center;
}

#dvczrxirtd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dvczrxirtd .gt_font_normal {
  font-weight: normal;
}

#dvczrxirtd .gt_font_bold {
  font-weight: bold;
}

#dvczrxirtd .gt_font_italic {
  font-style: italic;
}

#dvczrxirtd .gt_super {
  font-size: 65%;
}

#dvczrxirtd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dvczrxirtd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dvczrxirtd .gt_indent_1 {
  text-indent: 5px;
}

#dvczrxirtd .gt_indent_2 {
  text-indent: 10px;
}

#dvczrxirtd .gt_indent_3 {
  text-indent: 15px;
}

#dvczrxirtd .gt_indent_4 {
  text-indent: 20px;
}

#dvczrxirtd .gt_indent_5 {
  text-indent: 25px;
}

#dvczrxirtd .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dvczrxirtd div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="5" class="gt_heading gt_title gt_font_normal"><strong>Formula 1 Circuits and Safety Records</strong></td>
</tr>
<tr class="gt_heading even">
<td colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Historical data on races and fatal events by circuit</td>
</tr>
<tr class="gt_col_headings header">
<th id="Circuit" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Circuit</th>
<th id="Location" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Location</th>
<th id="Races" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Races</th>
<th id="Fatal-Events" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Fatal Events</th>
<th id="Fatality-Rate-(%)" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Fatality Rate (%)<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Autodromo Nazionale di Monza</td>
<td class="gt_row gt_left" headers="Location">(45.6°, 9.3°)</td>
<td class="gt_row gt_right" headers="Races">74</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">3</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFD78B; color: #000000">4.05</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuit de Monaco</td>
<td class="gt_row gt_left" headers="Location">(43.7°, 7.4°)</td>
<td class="gt_row gt_right" headers="Races">70</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFF1D6; color: #000000">1.43</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Silverstone Circuit</td>
<td class="gt_row gt_left" headers="Location">(52.1°, -1°)</td>
<td class="gt_row gt_right" headers="Races">59</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuit de Spa-Francorchamps</td>
<td class="gt_row gt_left" headers="Location">(50.4°, 6°)</td>
<td class="gt_row gt_right" headers="Races">57</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">2</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFDC9A; color: #000000">3.51</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Circuit Gilles Villeneuve</td>
<td class="gt_row gt_left" headers="Location">(45.5°, -73.5°)</td>
<td class="gt_row gt_right" headers="Races">43</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFE8BC; color: #000000">2.33</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Autódromo José Carlos Pace</td>
<td class="gt_row gt_left" headers="Location">(-23.7°, -46.7°)</td>
<td class="gt_row gt_right" headers="Races">41</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Nürburgring</td>
<td class="gt_row gt_left" headers="Location">(50.3°, 6.9°)</td>
<td class="gt_row gt_right" headers="Races">41</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">3</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFB916; color: #000000">7.32</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Hungaroring</td>
<td class="gt_row gt_left" headers="Location">(47.6°, 19.2°)</td>
<td class="gt_row gt_right" headers="Races">39</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Red Bull Ring</td>
<td class="gt_row gt_left" headers="Location">(47.2°, 14.8°)</td>
<td class="gt_row gt_right" headers="Races">38</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFE5B4; color: #000000">2.63</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Hockenheimring</td>
<td class="gt_row gt_left" headers="Location">(49.3°, 8.6°)</td>
<td class="gt_row gt_right" headers="Races">37</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Circuit Park Zandvoort</td>
<td class="gt_row gt_left" headers="Location">(52.4°, 4.5°)</td>
<td class="gt_row gt_right" headers="Races">34</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">2</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFC654; color: #000000">5.88</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuit de Barcelona-Catalunya</td>
<td class="gt_row gt_left" headers="Location">(41.6°, 2.3°)</td>
<td class="gt_row gt_right" headers="Races">34</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Suzuka Circuit</td>
<td class="gt_row gt_left" headers="Location">(34.8°, 136.5°)</td>
<td class="gt_row gt_right" headers="Races">34</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFE2AB; color: #000000">2.94</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Autodromo Enzo e Dino Ferrari</td>
<td class="gt_row gt_left" headers="Location">(44.3°, 11.7°)</td>
<td class="gt_row gt_right" headers="Races">31</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">2</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFC140; color: #000000">6.45</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Albert Park Grand Prix Circuit</td>
<td class="gt_row gt_left" headers="Location">(-37.8°, 145°)</td>
<td class="gt_row gt_right" headers="Races">27</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Autódromo Hermanos Rodríguez</td>
<td class="gt_row gt_left" headers="Location">(19.4°, -99.1°)</td>
<td class="gt_row gt_right" headers="Races">24</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Bahrain International Circuit</td>
<td class="gt_row gt_left" headers="Location">(26°, 50.5°)</td>
<td class="gt_row gt_right" headers="Races">21</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Autódromo Juan y Oscar Gálvez</td>
<td class="gt_row gt_left" headers="Location">(-34.7°, -58.5°)</td>
<td class="gt_row gt_right" headers="Races">20</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Kyalami</td>
<td class="gt_row gt_left" headers="Location">(-26°, 28.1°)</td>
<td class="gt_row gt_right" headers="Races">20</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFCE6F; color: #000000">5.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Watkins Glen</td>
<td class="gt_row gt_left" headers="Location">(42.3°, -76.9°)</td>
<td class="gt_row gt_right" headers="Races">20</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">2</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #F8922D; color: #000000">10.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Indianapolis Motor Speedway</td>
<td class="gt_row gt_left" headers="Location">(39.8°, -86.2°)</td>
<td class="gt_row gt_right" headers="Races">19</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">2</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #F78A31; color: #000000">10.53</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Sepang International Circuit</td>
<td class="gt_row gt_left" headers="Location">(2.8°, 101.7°)</td>
<td class="gt_row gt_right" headers="Races">19</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Circuit Paul Ricard</td>
<td class="gt_row gt_left" headers="Location">(43.3°, 5.8°)</td>
<td class="gt_row gt_right" headers="Races">18</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuit de Nevers Magny-Cours</td>
<td class="gt_row gt_left" headers="Location">(46.9°, 3.2°)</td>
<td class="gt_row gt_right" headers="Races">18</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Shanghai International Circuit</td>
<td class="gt_row gt_left" headers="Location">(31.3°, 121.2°)</td>
<td class="gt_row gt_right" headers="Races">17</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Yas Marina Circuit</td>
<td class="gt_row gt_left" headers="Location">(24.5°, 54.6°)</td>
<td class="gt_row gt_right" headers="Races">16</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Marina Bay Street Circuit</td>
<td class="gt_row gt_left" headers="Location">(1.3°, 103.9°)</td>
<td class="gt_row gt_right" headers="Races">15</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Brands Hatch</td>
<td class="gt_row gt_left" headers="Location">(51.4°, 0.3°)</td>
<td class="gt_row gt_right" headers="Races">14</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Autódromo do Estoril</td>
<td class="gt_row gt_left" headers="Location">(38.8°, -9.4°)</td>
<td class="gt_row gt_right" headers="Races">13</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuit of the Americas</td>
<td class="gt_row gt_left" headers="Location">(30.1°, -97.6°)</td>
<td class="gt_row gt_right" headers="Races">12</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Adelaide Street Circuit</td>
<td class="gt_row gt_left" headers="Location">(-34.9°, 138.6°)</td>
<td class="gt_row gt_right" headers="Races">11</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Reims-Gueux</td>
<td class="gt_row gt_left" headers="Location">(49.3°, 3.9°)</td>
<td class="gt_row gt_right" headers="Races">11</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FBA024; color: #000000">9.09</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Autódromo Internacional Nelson Piquet</td>
<td class="gt_row gt_left" headers="Location">(-23°, -43.4°)</td>
<td class="gt_row gt_right" headers="Races">10</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Zolder</td>
<td class="gt_row gt_left" headers="Location">(51°, 5.3°)</td>
<td class="gt_row gt_right" headers="Races">10</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #F8922D; color: #000000">10.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Istanbul Park</td>
<td class="gt_row gt_left" headers="Location">(41°, 29.4°)</td>
<td class="gt_row gt_right" headers="Races">9</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Jarama</td>
<td class="gt_row gt_left" headers="Location">(40.6°, -3.6°)</td>
<td class="gt_row gt_right" headers="Races">9</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Baku City Circuit</td>
<td class="gt_row gt_left" headers="Location">(40.4°, 49.9°)</td>
<td class="gt_row gt_right" headers="Races">8</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Long Beach</td>
<td class="gt_row gt_left" headers="Location">(33.8°, -118.2°)</td>
<td class="gt_row gt_right" headers="Races">8</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Mosport International Raceway</td>
<td class="gt_row gt_left" headers="Location">(44°, -78.7°)</td>
<td class="gt_row gt_right" headers="Races">8</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Sochi Autodrom</td>
<td class="gt_row gt_left" headers="Location">(43.4°, 40°)</td>
<td class="gt_row gt_right" headers="Races">8</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Circuito de Jerez</td>
<td class="gt_row gt_left" headers="Location">(36.7°, -6°)</td>
<td class="gt_row gt_right" headers="Races">7</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Detroit Street Circuit</td>
<td class="gt_row gt_left" headers="Location">(42.3°, -83°)</td>
<td class="gt_row gt_right" headers="Races">7</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Dijon-Prenois</td>
<td class="gt_row gt_left" headers="Location">(47.4°, 4.9°)</td>
<td class="gt_row gt_right" headers="Races">6</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Scandinavian Raceway</td>
<td class="gt_row gt_left" headers="Location">(57.3°, 13.6°)</td>
<td class="gt_row gt_right" headers="Races">6</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Aintree</td>
<td class="gt_row gt_left" headers="Location">(53.5°, -2.9°)</td>
<td class="gt_row gt_right" headers="Races">5</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuit Bremgarten</td>
<td class="gt_row gt_left" headers="Location">(47°, 7.4°)</td>
<td class="gt_row gt_right" headers="Races">5</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Rouen-Les-Essarts</td>
<td class="gt_row gt_left" headers="Location">(49.3°, 1°)</td>
<td class="gt_row gt_right" headers="Races">5</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #808080; color: #FFFFFF">20.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Valencia Street Circuit</td>
<td class="gt_row gt_left" headers="Location">(39.5°, -0.3°)</td>
<td class="gt_row gt_right" headers="Races">5</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Charade Circuit</td>
<td class="gt_row gt_left" headers="Location">(45.7°, 3°)</td>
<td class="gt_row gt_right" headers="Races">4</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Fuji Speedway</td>
<td class="gt_row gt_left" headers="Location">(35.4°, 138.9°)</td>
<td class="gt_row gt_right" headers="Races">4</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Jeddah Corniche Circuit</td>
<td class="gt_row gt_left" headers="Location">(21.6°, 39.1°)</td>
<td class="gt_row gt_right" headers="Races">4</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Korean International Circuit</td>
<td class="gt_row gt_left" headers="Location">(34.7°, 126.4°)</td>
<td class="gt_row gt_right" headers="Races">4</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Montjuïc</td>
<td class="gt_row gt_left" headers="Location">(41.4°, 2.2°)</td>
<td class="gt_row gt_right" headers="Races">4</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Buddh International Circuit</td>
<td class="gt_row gt_left" headers="Location">(28.3°, 77.5°)</td>
<td class="gt_row gt_right" headers="Races">3</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Losail International Circuit</td>
<td class="gt_row gt_left" headers="Location">(25.5°, 51.5°)</td>
<td class="gt_row gt_right" headers="Races">3</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Miami International Autodrome</td>
<td class="gt_row gt_left" headers="Location">(26°, -80.2°)</td>
<td class="gt_row gt_right" headers="Races">3</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Phoenix street circuit</td>
<td class="gt_row gt_left" headers="Location">(33.4°, -112.1°)</td>
<td class="gt_row gt_right" headers="Races">3</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Prince George Circuit</td>
<td class="gt_row gt_left" headers="Location">(-33°, 27.9°)</td>
<td class="gt_row gt_right" headers="Races">3</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Autódromo Internacional do Algarve</td>
<td class="gt_row gt_left" headers="Location">(37.2°, -8.6°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuit Mont-Tremblant</td>
<td class="gt_row gt_left" headers="Location">(46.2°, -74.6°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Circuit de Pedralbes</td>
<td class="gt_row gt_left" headers="Location">(41.4°, 2.1°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Circuito da Boavista</td>
<td class="gt_row gt_left" headers="Location">(41.2°, -8.7°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Las Vegas Street Circuit</td>
<td class="gt_row gt_left" headers="Location">(36.1°, -115.2°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Las Vegas Strip Street Circuit</td>
<td class="gt_row gt_left" headers="Location">(36.1°, -115.2°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Nivelles-Baulers</td>
<td class="gt_row gt_left" headers="Location">(50.6°, 4.3°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Okayama International Circuit</td>
<td class="gt_row gt_left" headers="Location">(34.9°, 134.2°)</td>
<td class="gt_row gt_right" headers="Races">2</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">AVUS</td>
<td class="gt_row gt_left" headers="Location">(52.5°, 13.3°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Ain Diab</td>
<td class="gt_row gt_left" headers="Location">(33.6°, -7.7°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events" style="background-color: rgba(255,183,3,0.16)">1</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #808080; color: #FFFFFF">100.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Autodromo Internazionale del Mugello</td>
<td class="gt_row gt_left" headers="Location">(44°, 11.4°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Donington Park</td>
<td class="gt_row gt_left" headers="Location">(52.8°, -1.4°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Fair Park</td>
<td class="gt_row gt_left" headers="Location">(32.8°, -96.8°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Le Mans</td>
<td class="gt_row gt_left" headers="Location">(48°, 0.2°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Monsanto Park Circuit</td>
<td class="gt_row gt_left" headers="Location">(38.7°, -9.2°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Pescara Circuit</td>
<td class="gt_row gt_left" headers="Location">(42.5°, 14.2°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Riverside International Raceway</td>
<td class="gt_row gt_left" headers="Location">(33.9°, -117.3°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Circuit">Sebring International Raceway</td>
<td class="gt_row gt_left" headers="Location">(27.5°, -81.3°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Circuit">Zeltweg</td>
<td class="gt_row gt_left" headers="Location">(47.2°, 14.7°)</td>
<td class="gt_row gt_right" headers="Races">1</td>
<td class="gt_row gt_right" headers="Fatal Events">0</td>
<td class="gt_row gt_right" headers="Fatality Rate (%)" style="background-color: #FFFFFF; color: #000000">0.00</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="5" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Fatality Rate = (Fatal Events / Number of Races) × 100</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>Monza has hosted the most F1 races historically, followed by Monaco, with varying safety records.</li>
<li>Several circuits have hosted numerous races without any fatal incidents, demonstrating consistent safety standards.</li>
<li>The color-coding effectively highlights the circuits with concerning safety records at a glance.</li>
</ul>
</section>
<section id="driver-age-and-experience-analysis" class="level2">
<h2 class="anchored" data-anchor-id="driver-age-and-experience-analysis">6. Driver Age and Experience Analysis</h2>
<p>This visualization examines the relationship between driver age and fatal incidents.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate driver age at each race</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>driver_age_experience <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">driver_age =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">as.Date</span>(date), <span class="fu">as.Date</span>(driver.dob), <span class="at">units =</span> <span class="st">"days"</span>) <span class="sc">/</span> <span class="fl">365.25</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Flag fatal events</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(driver.name) <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_event =</span> driver.fatal <span class="sc">==</span> <span class="st">"Death"</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create fatal events dataset</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>fatal_driver_events <span class="ot">&lt;-</span> driver_age_experience <span class="sc">%&gt;%</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fatal_event <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Create overall distribution dataset for comparison</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>driver_age_summary <span class="ot">&lt;-</span> driver_age_experience <span class="sc">%&gt;%</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(driver.name) <span class="sc">%&gt;%</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_age =</span> <span class="fu">mean</span>(driver_age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_incident =</span> <span class="fu">any</span>(fatal_event),</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create age distribution plot</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>driver_age_distribution <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add density plot for all drivers</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">data =</span> driver_age_summary, </span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> avg_age, <span class="at">fill =</span> <span class="st">"All Drivers"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add density plot for drivers with fatal incidents</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">data =</span> <span class="fu">filter</span>(driver_age_summary, fatal_incident <span class="sc">==</span> <span class="cn">TRUE</span>), </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> avg_age, <span class="at">fill =</span> <span class="st">"Drivers with Fatal Incidents"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add individual points for fatal events</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>(<span class="at">data =</span> fatal_driver_events, <span class="fu">aes</span>(<span class="at">x =</span> driver_age), <span class="at">color =</span> <span class="st">"#e63946"</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Styling</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"All Drivers"</span> <span class="ot">=</span> <span class="st">"#3a86ff"</span>, <span class="st">"Drivers with Fatal Incidents"</span> <span class="ot">=</span> <span class="st">"#e63946"</span>)) <span class="sc">+</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Age Distribution of F1 Drivers and Fatal Incidents"</span>,</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Comparing age profiles of all drivers vs. those involved in fatal incidents"</span>,</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Driver Age (years)"</span>,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Density"</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Driver Group"</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>driver_age_distribution</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="step2_EDAViz_files/figure-html/driver-age-analysis-1.png" class="img-fluid figure-img" width="3000"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>The age distribution of drivers involved in fatal incidents differs from the overall driver population.</li>
<li>Individual fatal events (shown by the red rug marks) reveal specific age patterns that may indicate higher-risk age groups.</li>
<li>The density curves show how the risk profile changes across the age spectrum.</li>
</ul>
</section>
<section id="safety-evolution-by-decade" class="level2">
<h2 class="anchored" data-anchor-id="safety-evolution-by-decade">7. Safety Evolution by Decade</h2>
<p>This visualization shows how Formula 1 safety has improved over time by examining fatality rates by decade.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create decade analysis</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>safety_by_decade <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">decade =</span> <span class="fu">paste0</span>(<span class="fu">floor</span>(year<span class="sc">/</span><span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span>, <span class="st">"s"</span>),  <span class="co"># Create decade categories</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_event =</span> driver.fatal <span class="sc">==</span> <span class="st">"Death"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(decade) <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_races =</span> <span class="fu">n_distinct</span>(Race),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">unique_drivers =</span> <span class="fu">n_distinct</span>(driver.name),</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_events =</span> <span class="fu">sum</span>(fatal_event, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_rate_per_race =</span> fatal_events <span class="sc">/</span> total_races,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_rate_per_100_drivers =</span> fatal_events <span class="sc">/</span> unique_drivers <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(decade)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create decade trend visualization</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>decade_safety_evolution <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(safety_by_decade) <span class="sc">+</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Bar chart for total races</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> decade, <span class="at">y =</span> total_races, <span class="at">fill =</span> <span class="st">"Total Races"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Line chart for fatality rate</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> decade, <span class="at">y =</span> fatal_rate_per_100_drivers <span class="sc">*</span> <span class="dv">5</span>, <span class="at">group =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"Fatality Rate"</span>), </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> decade, <span class="at">y =</span> fatal_rate_per_100_drivers <span class="sc">*</span> <span class="dv">5</span>), </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"#e63946"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add text labels for fatality rate</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> decade, <span class="at">y =</span> fatal_rate_per_100_drivers <span class="sc">*</span> <span class="dv">5</span> <span class="sc">+</span> <span class="dv">2</span>, </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">"%.2f"</span>, fatal_rate_per_100_drivers)),</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#e63946"</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Styling</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Total Races"</span> <span class="ot">=</span> <span class="st">"#3a86ff"</span>)) <span class="sc">+</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Fatality Rate"</span> <span class="ot">=</span> <span class="st">"#e63946"</span>)) <span class="sc">+</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Number of Races"</span>,</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span><span class="dv">5</span>, <span class="at">name =</span> <span class="st">"Fatal Events per 100 Drivers"</span>)</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Formula 1 Safety Evolution by Decade"</span>,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Number of races vs. driver fatality rate"</span>,</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Decade"</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#3a86ff"</span>),</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#e63946"</span>),</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>()</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>decade_safety_evolution</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="step2_EDAViz_files/figure-html/decade-safety-evolution-1.png" class="img-fluid figure-img" width="3000"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>The fatality rate has decreased dramatically from the 1950s to the present day, with the most significant safety improvements occurring between the 1970s and 1980s.</li>
<li>There’s a clear inverse relationship between the number of races (blue bars) and fatality rates (red line).</li>
<li>Recent decades have maintained low fatality rates despite hosting significantly more races.</li>
</ul>
</section>
<section id="circuit-risk-analysis" class="level2">
<h2 class="anchored" data-anchor-id="circuit-risk-analysis">8. Circuit Risk Analysis</h2>
<p>This visualization examines the relationship between race frequency, driver exposure, and fatal events at different circuits.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Circuit danger analysis</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>circuit_risk_analysis <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(circuit.name, circuit.country) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">races_held =</span> <span class="fu">n_distinct</span>(Race),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">unique_drivers =</span> <span class="fu">n_distinct</span>(driver.name),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_events =</span> <span class="fu">sum</span>(driver.fatal <span class="sc">==</span> <span class="st">"Death"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate danger metrics</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatality_rate =</span> fatal_events <span class="sc">/</span> races_held,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">danger_index =</span> (fatal_events <span class="sc">/</span> unique_drivers) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">danger_category =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>      fatal_events <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Safe"</span>,</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>      danger_index <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Low Risk"</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>      danger_index <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Medium Risk"</span>,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"High Risk"</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter to circuits with at least 5 races for statistical significance</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(races_held <span class="sc">&gt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(danger_index))</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a scatter plot of exposure vs danger</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>circuit_risk_chart <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(circuit_risk_analysis, <span class="fu">aes</span>(<span class="at">x =</span> races_held, <span class="at">y =</span> unique_drivers)) <span class="sc">+</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> fatal_events, <span class="at">color =</span> danger_category), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">filter</span>(circuit_risk_analysis, fatal_events <span class="sc">&gt;</span> <span class="dv">0</span>),</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> circuit.name),</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">box.padding =</span> <span class="fl">0.5</span>,</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">force =</span> <span class="dv">3</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Safe"</span> <span class="ot">=</span> <span class="st">"#3a86ff"</span>, </span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Low Risk"</span> <span class="ot">=</span> <span class="st">"#8ecae6"</span>,</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Medium Risk"</span> <span class="ot">=</span> <span class="st">"#ffb703"</span>,</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"High Risk"</span> <span class="ot">=</span> <span class="st">"#e63946"</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">10</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Formula 1 Circuit Safety Analysis"</span>,</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Driver exposure vs. fatal events (circuits with 5+ races)"</span>,</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Number of Races Held"</span>,</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Unique Drivers"</span>,</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Risk Category"</span>,</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"Fatal Events"</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>circuit_risk_chart</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="step2_EDAViz_files/figure-html/circuit-risk-analysis-1.png" class="img-fluid figure-img" width="3000"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>Circuits with similar numbers of races can have dramatically different safety records, suggesting inherent risk factors at certain venues.</li>
<li>Several historic circuits (e.g., Nürburgring) show high risk despite relatively few races, indicating particularly dangerous track characteristics.</li>
<li>Many newer circuits fall into the “Safe” category (blue points), reflecting modern safety standards.</li>
</ul>
</section>
<section id="monthly-pattern-analysis" class="level2">
<h2 class="anchored" data-anchor-id="monthly-pattern-analysis">9. Monthly Pattern Analysis</h2>
<p>This visualization examines whether fatal events show any seasonal patterns throughout the year.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract month information</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>monthly_race_data <span class="ot">&lt;-</span> dataOK <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_date =</span> <span class="fu">as.Date</span>(date),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">factor</span>(<span class="fu">month</span>(race_date, <span class="at">label =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_event =</span> driver.fatal <span class="sc">==</span> <span class="st">"Death"</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate race identifier</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, Race) <span class="sc">%&gt;%</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_id =</span> <span class="fu">cur_group_id</span>()</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze by month</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="ot">&lt;-</span> monthly_race_data <span class="sc">%&gt;%</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_races =</span> <span class="fu">n_distinct</span>(race_id),</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_events =</span> <span class="fu">sum</span>(fatal_event, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatal_rate =</span> fatal_events <span class="sc">/</span> total_races,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Create month visualization</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>monthly_fatality_chart <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(monthly_summary) <span class="sc">+</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> total_races, <span class="at">fill =</span> <span class="st">"Total Races"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> fatal_events <span class="sc">*</span> <span class="dv">10</span>, <span class="at">group =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"Fatal Events"</span>), </span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> fatal_events <span class="sc">*</span> <span class="dv">10</span>), </span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"#e63946"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add text for fatal events</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> fatal_events <span class="sc">*</span> <span class="dv">10</span> <span class="sc">+</span> <span class="dv">1</span>, <span class="at">label =</span> fatal_events),</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#e63946"</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Styling</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Total Races"</span> <span class="ot">=</span> <span class="st">"#3a86ff"</span>)) <span class="sc">+</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Fatal Events"</span> <span class="ot">=</span> <span class="st">"#e63946"</span>)) <span class="sc">+</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Number of Races"</span>,</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span><span class="dv">10</span>, <span class="at">name =</span> <span class="st">"Number of Fatal Events"</span>)</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Formula 1 Fatal Events by Month"</span>,</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Distribution of races and fatal events across calendar months"</span>,</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#3a86ff"</span>),</span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#e63946"</span>),</span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>()</span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the chart</span></span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a>monthly_fatality_chart</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="step2_EDAViz_files/figure-html/monthly-pattern-1.png" class="img-fluid figure-img" width="3000"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li>Racing frequency varies by month, with peaks in traditional F1 season months.</li>
<li>Some months (e.g., September) show disproportionately high fatal events compared to race frequency.</li>
<li>The pattern may reflect different weather conditions, circuit characteristics, or seasonal factors affecting safety.</li>
</ul>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">10. Conclusion</h2>
<p>Our visual exploration of Formula 1 fatal events from 1950 to 2024 reveals several important patterns:</p>
<ol type="1">
<li><p><strong>Temporal trends</strong>: Fatal incidents have decreased dramatically over time, particularly since the 1980s, despite increased race frequency and driver participation.</p></li>
<li><p><strong>Driver factors</strong>: Age and experience show complex relationships with fatal event risk, with rookie drivers facing higher risks.</p></li>
<li><p><strong>Circuit characteristics</strong>: Historic European circuits generally show higher fatality rates than newer facilities, suggesting safety improvements in modern circuit design.</p></li>
<li><p><strong>Team/constructor patterns</strong>: Fatal events aren’t evenly distributed across teams, with some constructors having disproportionately high fatality rates.</p></li>
<li><p><strong>Geographic patterns</strong>: Fatal events show regional clustering, with certain parts of Europe having historically higher-risk circuits.</p></li>
</ol>
<p>These visualizations highlight the multifaceted nature of safety in Formula 1, demonstrating how improvements in regulations, car design, circuit safety, and driver training have collectively contributed to making the sport significantly safer over its 75-year history.</p>


</section>
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© 2024 Formula 1 Fatal Events Analysis Project</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>